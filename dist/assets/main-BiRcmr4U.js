(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var nn,I,bi,_i,$e,Qn,wi,ki,Ci,Nn,Cn,Sn,ft={},Si=[],no=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,on=Array.isArray;function ce(t,n){for(var i in n)t[i]=n[i];return t}function En(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function io(t,n,i){var o,r,l,a={};for(l in n)l=="key"?o=n[l]:l=="ref"?r=n[l]:a[l]=n[l];if(arguments.length>2&&(a.children=arguments.length>3?nn.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(l in t.defaultProps)a[l]===void 0&&(a[l]=t.defaultProps[l]);return Ut(t,a,o,r,null)}function Ut(t,n,i,o,r){var l={type:t,props:n,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++bi,__i:-1,__u:0};return r==null&&I.vnode!=null&&I.vnode(l),l}function R(t){return t.children}function dt(t,n){this.props=t,this.context=n}function Ve(t,n){if(n==null)return t.__?Ve(t.__,t.__i+1):null;for(var i;n<t.__k.length;n++)if((i=t.__k[n])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?Ve(t):null}function $i(t){var n,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if((i=t.__k[n])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return $i(t)}}function Zn(t){(!t.__d&&(t.__d=!0)&&$e.push(t)&&!Kt.__r++||Qn!=I.debounceRendering)&&((Qn=I.debounceRendering)||wi)(Kt)}function Kt(){for(var t,n,i,o,r,l,a,s=1;$e.length;)$e.length>s&&$e.sort(ki),t=$e.shift(),s=$e.length,t.__d&&(i=void 0,o=void 0,r=(o=(n=t).__v).__e,l=[],a=[],n.__P&&((i=ce({},o)).__v=o.__v+1,I.vnode&&I.vnode(i),Tn(n.__P,i,o,n.__n,n.__P.namespaceURI,32&o.__u?[r]:null,l,r??Ve(o),!!(32&o.__u),a),i.__v=o.__v,i.__.__k[i.__i]=i,Ai(l,i,a),o.__e=o.__=null,i.__e!=r&&$i(i)));Kt.__r=0}function zi(t,n,i,o,r,l,a,s,d,c,f){var p,u,h,g,x,m,b,_=o&&o.__k||Si,w=n.length;for(d=oo(i,n,_,d,w),p=0;p<w;p++)(h=i.__k[p])!=null&&(u=h.__i==-1?ft:_[h.__i]||ft,h.__i=p,m=Tn(t,h,u,r,l,a,s,d,c,f),g=h.__e,h.ref&&u.ref!=h.ref&&(u.ref&&Ln(u.ref,null,h),f.push(h.ref,h.__c||g,h)),x==null&&g!=null&&(x=g),(b=!!(4&h.__u))||u.__k===h.__k?d=Ii(h,d,t,b):typeof h.type=="function"&&m!==void 0?d=m:g&&(d=g.nextSibling),h.__u&=-7);return i.__e=x,d}function oo(t,n,i,o,r){var l,a,s,d,c,f=i.length,p=f,u=0;for(t.__k=new Array(r),l=0;l<r;l++)(a=n[l])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=t.__k[l]=Ut(null,a,null,null,null):on(a)?a=t.__k[l]=Ut(R,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=t.__k[l]=Ut(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):t.__k[l]=a,d=l+u,a.__=t,a.__b=t.__b+1,(c=a.__i=ro(a,i,d,p))!=-1&&(p--,(s=i[c])&&(s.__u|=2)),s==null||s.__v==null?(c==-1&&(r>f?u--:r<f&&u++),typeof a.type!="function"&&(a.__u|=4)):c!=d&&(c==d-1?u--:c==d+1?u++:(c>d?u--:u++,a.__u|=4))):t.__k[l]=null;if(p)for(l=0;l<f;l++)(s=i[l])!=null&&(2&s.__u)==0&&(s.__e==o&&(o=Ve(s)),Ri(s,s));return o}function Ii(t,n,i,o){var r,l;if(typeof t.type=="function"){for(r=t.__k,l=0;r&&l<r.length;l++)r[l]&&(r[l].__=t,n=Ii(r[l],n,i,o));return n}t.__e!=n&&(o&&(n&&t.type&&!n.parentNode&&(n=Ve(t)),i.insertBefore(t.__e,n||null)),n=t.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function ro(t,n,i,o){var r,l,a,s=t.key,d=t.type,c=n[i],f=c!=null&&(2&c.__u)==0;if(c===null&&s==null||f&&s==c.key&&d==c.type)return i;if(o>(f?1:0)){for(r=i-1,l=i+1;r>=0||l<n.length;)if((c=n[a=r>=0?r--:l++])!=null&&(2&c.__u)==0&&s==c.key&&d==c.type)return a}return-1}function Xn(t,n,i){n[0]=="-"?t.setProperty(n,i??""):t[n]=i==null?"":typeof i!="number"||no.test(n)?i:i+"px"}function Rt(t,n,i,o,r){var l,a;e:if(n=="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(n in o)i&&n in i||Xn(t.style,n,"");if(i)for(n in i)o&&i[n]==o[n]||Xn(t.style,n,i[n])}else if(n[0]=="o"&&n[1]=="n")l=n!=(n=n.replace(Ci,"$1")),a=n.toLowerCase(),n=a in t||n=="onFocusOut"||n=="onFocusIn"?a.slice(2):n.slice(2),t.l||(t.l={}),t.l[n+l]=i,i?o?i.u=o.u:(i.u=Nn,t.addEventListener(n,l?Sn:Cn,l)):t.removeEventListener(n,l?Sn:Cn,l);else{if(r=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in t)try{t[n]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&n[4]!="-"?t.removeAttribute(n):t.setAttribute(n,n=="popover"&&i==1?"":i))}}function ei(t){return function(n){if(this.l){var i=this.l[n.type+t];if(n.t==null)n.t=Nn++;else if(n.t<i.u)return;return i(I.event?I.event(n):n)}}}function Tn(t,n,i,o,r,l,a,s,d,c){var f,p,u,h,g,x,m,b,_,w,k,$,A,Q,ie,oe,Z,O=n.type;if(n.constructor!=null)return null;128&i.__u&&(d=!!(32&i.__u),l=[s=n.__e=i.__e]),(f=I.__b)&&f(n);e:if(typeof O=="function")try{if(b=n.props,_="prototype"in O&&O.prototype.render,w=(f=O.contextType)&&o[f.__c],k=f?w?w.props.value:f.__:o,i.__c?m=(p=n.__c=i.__c).__=p.__E:(_?n.__c=p=new O(b,k):(n.__c=p=new dt(b,k),p.constructor=O,p.render=ao),w&&w.sub(p),p.state||(p.state={}),p.__n=o,u=p.__d=!0,p.__h=[],p._sb=[]),_&&p.__s==null&&(p.__s=p.state),_&&O.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ce({},p.__s)),ce(p.__s,O.getDerivedStateFromProps(b,p.__s))),h=p.props,g=p.state,p.__v=n,u)_&&O.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),_&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(_&&O.getDerivedStateFromProps==null&&b!==h&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(b,k),n.__v==i.__v||!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(b,p.__s,k)===!1){for(n.__v!=i.__v&&(p.props=b,p.state=p.__s,p.__d=!1),n.__e=i.__e,n.__k=i.__k,n.__k.some(function(re){re&&(re.__=n)}),$=0;$<p._sb.length;$++)p.__h.push(p._sb[$]);p._sb=[],p.__h.length&&a.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(b,p.__s,k),_&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(h,g,x)})}if(p.context=k,p.props=b,p.__P=t,p.__e=!1,A=I.__r,Q=0,_){for(p.state=p.__s,p.__d=!1,A&&A(n),f=p.render(p.props,p.state,p.context),ie=0;ie<p._sb.length;ie++)p.__h.push(p._sb[ie]);p._sb=[]}else do p.__d=!1,A&&A(n),f=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++Q<25);p.state=p.__s,p.getChildContext!=null&&(o=ce(ce({},o),p.getChildContext())),_&&!u&&p.getSnapshotBeforeUpdate!=null&&(x=p.getSnapshotBeforeUpdate(h,g)),oe=f,f!=null&&f.type===R&&f.key==null&&(oe=Mi(f.props.children)),s=zi(t,on(oe)?oe:[oe],n,i,o,r,l,a,s,d,c),p.base=n.__e,n.__u&=-161,p.__h.length&&a.push(p),m&&(p.__E=p.__=null)}catch(re){if(n.__v=null,d||l!=null)if(re.then){for(n.__u|=d?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;l[l.indexOf(s)]=null,n.__e=s}else{for(Z=l.length;Z--;)En(l[Z]);$n(n)}else n.__e=i.__e,n.__k=i.__k,re.then||$n(n);I.__e(re,n,i)}else l==null&&n.__v==i.__v?(n.__k=i.__k,n.__e=i.__e):s=n.__e=lo(i.__e,n,i,o,r,l,a,d,c);return(f=I.diffed)&&f(n),128&n.__u?void 0:s}function $n(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach($n)}function Ai(t,n,i){for(var o=0;o<i.length;o++)Ln(i[o],i[++o],i[++o]);I.__c&&I.__c(n,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(l){l.call(r)})}catch(l){I.__e(l,r.__v)}})}function Mi(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:on(t)?t.map(Mi):ce({},t)}function lo(t,n,i,o,r,l,a,s,d){var c,f,p,u,h,g,x,m=i.props||ft,b=n.props,_=n.type;if(_=="svg"?r="http://www.w3.org/2000/svg":_=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),l!=null){for(c=0;c<l.length;c++)if((h=l[c])&&"setAttribute"in h==!!_&&(_?h.localName==_:h.nodeType==3)){t=h,l[c]=null;break}}if(t==null){if(_==null)return document.createTextNode(b);t=document.createElementNS(r,_,b.is&&b),s&&(I.__m&&I.__m(n,l),s=!1),l=null}if(_==null)m===b||s&&t.data==b||(t.data=b);else{if(l=l&&nn.call(t.childNodes),!s&&l!=null)for(m={},c=0;c<t.attributes.length;c++)m[(h=t.attributes[c]).name]=h.value;for(c in m)if(h=m[c],c!="children"){if(c=="dangerouslySetInnerHTML")p=h;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;Rt(t,c,null,h,r)}}for(c in b)h=b[c],c=="children"?u=h:c=="dangerouslySetInnerHTML"?f=h:c=="value"?g=h:c=="checked"?x=h:s&&typeof h!="function"||m[c]===h||Rt(t,c,h,m[c],r);if(f)s||p&&(f.__html==p.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),n.__k=[];else if(p&&(t.innerHTML=""),zi(n.type=="template"?t.content:t,on(u)?u:[u],n,i,o,_=="foreignObject"?"http://www.w3.org/1999/xhtml":r,l,a,l?l[0]:i.__k&&Ve(i,0),s,d),l!=null)for(c=l.length;c--;)En(l[c]);s||(c="value",_=="progress"&&g==null?t.removeAttribute("value"):g!=null&&(g!==t[c]||_=="progress"&&!g||_=="option"&&g!=m[c])&&Rt(t,c,g,m[c],r),c="checked",x!=null&&x!=t[c]&&Rt(t,c,x,m[c],r))}return t}function Ln(t,n,i){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&n==null||(t.__u=t(n))}else t.current=n}catch(r){I.__e(r,i)}}function Ri(t,n,i){var o,r;if(I.unmount&&I.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||Ln(o,null,n)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(l){I.__e(l,n)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&Ri(o[r],n,i||typeof t.type!="function");i||En(t.__e),t.__c=t.__=t.__e=void 0}function ao(t,n,i){return this.constructor(t,i)}function so(t,n,i){var o,r,l,a;n==document&&(n=document.documentElement),I.__&&I.__(t,n),r=(o=!1)?null:n.__k,l=[],a=[],Tn(n,t=n.__k=io(R,null,[t]),r||ft,ft,n.namespaceURI,r?null:n.firstChild?nn.call(n.childNodes):null,l,r?r.__e:n.firstChild,o,a),Ai(l,t,a)}nn=Si.slice,I={__e:function(t,n,i,o){for(var r,l,a;n=n.__;)if((r=n.__c)&&!r.__)try{if((l=r.constructor)&&l.getDerivedStateFromError!=null&&(r.setState(l.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(s){t=s}throw t}},bi=0,_i=function(t){return t!=null&&t.constructor==null},dt.prototype.setState=function(t,n){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ce({},this.state),typeof t=="function"&&(t=t(ce({},i),this.props)),t&&ce(i,t),t!=null&&this.__v&&(n&&this._sb.push(n),Zn(this))},dt.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Zn(this))},dt.prototype.render=R,$e=[],wi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ki=function(t,n){return t.__v.__b-n.__v.__b},Kt.__r=0,Ci=/(PointerCapture)$|Capture$/i,Nn=0,Cn=ei(!1),Sn=ei(!0);var co=0;function e(t,n,i,o,r,l){n||(n={});var a,s,d=n;if("ref"in d)for(s in d={},n)s=="ref"?a=n[s]:d[s]=n[s];var c={type:t,props:d,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--co,__i:-1,__u:0,__source:r,__self:l};if(typeof t=="function"&&(a=t.defaultProps))for(s in a)d[s]===void 0&&(d[s]=a[s]);return I.vnode&&I.vnode(c),c}var gt,P,un,ti,Yt=0,Di=[],F=I,ni=F.__b,ii=F.__r,oi=F.diffed,ri=F.__c,li=F.unmount,ai=F.__;function Bn(t,n){F.__h&&F.__h(P,t,Yt||n),Yt=0;var i=P.__H||(P.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function le(t){return Yt=1,uo(Ni,t)}function uo(t,n,i){var o=Bn(gt++,2);if(o.t=t,!o.__c&&(o.__=[Ni(void 0,n),function(s){var d=o.__N?o.__N[0]:o.__[0],c=o.t(d,s);d!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=P,!P.__f)){var r=function(s,d,c){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(u){return!!u.__c});if(f.every(function(u){return!u.__N}))return!l||l.call(this,s,d,c);var p=o.__c.props!==s;return f.forEach(function(u){if(u.__N){var h=u.__[0];u.__=u.__N,u.__N=void 0,h!==u.__[0]&&(p=!0)}}),l&&l.call(this,s,d,c)||p};P.__f=!0;var l=P.shouldComponentUpdate,a=P.componentWillUpdate;P.componentWillUpdate=function(s,d,c){if(this.__e){var f=l;l=void 0,r(s,d,c),l=f}a&&a.call(this,s,d,c)},P.shouldComponentUpdate=r}return o.__N||o.__}function j(t,n){var i=Bn(gt++,3);!F.__s&&Fi(i.__H,n)&&(i.__=t,i.u=n,P.__H.__h.push(i))}function po(t){return Yt=5,Pi(function(){return{current:t}},[])}function Pi(t,n){var i=Bn(gt++,7);return Fi(i.__H,n)&&(i.__=t(),i.__H=n,i.__h=t),i.__}function ho(){for(var t;t=Di.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Vt),t.__H.__h.forEach(zn),t.__H.__h=[]}catch(n){t.__H.__h=[],F.__e(n,t.__v)}}F.__b=function(t){P=null,ni&&ni(t)},F.__=function(t,n){t&&n.__k&&n.__k.__m&&(t.__m=n.__k.__m),ai&&ai(t,n)},F.__r=function(t){ii&&ii(t),gt=0;var n=(P=t.__c).__H;n&&(un===P?(n.__h=[],P.__h=[],n.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(n.__h.forEach(Vt),n.__h.forEach(zn),n.__h=[],gt=0)),un=P},F.diffed=function(t){oi&&oi(t);var n=t.__c;n&&n.__H&&(n.__H.__h.length&&(Di.push(n)!==1&&ti===F.requestAnimationFrame||((ti=F.requestAnimationFrame)||fo)(ho)),n.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),un=P=null},F.__c=function(t,n){n.some(function(i){try{i.__h.forEach(Vt),i.__h=i.__h.filter(function(o){return!o.__||zn(o)})}catch(o){n.some(function(r){r.__h&&(r.__h=[])}),n=[],F.__e(o,i.__v)}}),ri&&ri(t,n)},F.unmount=function(t){li&&li(t);var n,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(o){try{Vt(o)}catch(r){n=r}}),i.__H=void 0,n&&F.__e(n,i.__v))};var si=typeof requestAnimationFrame=="function";function fo(t){var n,i=function(){clearTimeout(o),si&&cancelAnimationFrame(n),setTimeout(t)},o=setTimeout(i,35);si&&(n=requestAnimationFrame(i))}function Vt(t){var n=P,i=t.__c;typeof i=="function"&&(t.__c=void 0,i()),P=n}function zn(t){var n=P;t.__c=t.__(),P=n}function Fi(t,n){return!t||t.length!==n.length||n.some(function(i,o){return i!==t[o]})}function Ni(t,n){return typeof n=="function"?n(t):n}var go=Symbol.for("preact-signals");function rn(){if(ye>1)ye--;else{for(var t,n=!1;ut!==void 0;){var i=ut;for(ut=void 0,In++;i!==void 0;){var o=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&Li(i))try{i.c()}catch(r){n||(t=r,n=!0)}i=o}}if(In=0,ye--,n)throw t}}function vo(t){if(ye>0)return t();ye++;try{return t()}finally{rn()}}var z=void 0;function Ei(t){var n=z;z=void 0;try{return t()}finally{z=n}}var ut=void 0,ye=0,In=0,qt=0;function Ti(t){if(z!==void 0){var n=t.n;if(n===void 0||n.t!==z)return n={i:0,S:t,p:z.s,n:void 0,t:z,e:void 0,x:void 0,r:n},z.s!==void 0&&(z.s.n=n),z.s=n,t.n=n,32&z.f&&t.S(n),n;if(n.i===-1)return n.i=0,n.n!==void 0&&(n.n.p=n.p,n.p!==void 0&&(n.p.n=n.n),n.p=z.s,n.n=void 0,z.s.n=n,z.s=n),n}}function B(t,n){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=n?.watched,this.Z=n?.unwatched,this.name=n?.name}B.prototype.brand=go;B.prototype.h=function(){return!0};B.prototype.S=function(t){var n=this,i=this.t;i!==t&&t.e===void 0&&(t.x=i,this.t=t,i!==void 0?i.e=t:Ei(function(){var o;(o=n.W)==null||o.call(n)}))};B.prototype.U=function(t){var n=this;if(this.t!==void 0){var i=t.e,o=t.x;i!==void 0&&(i.x=o,t.e=void 0),o!==void 0&&(o.e=i,t.x=void 0),t===this.t&&(this.t=o,o===void 0&&Ei(function(){var r;(r=n.Z)==null||r.call(n)}))}};B.prototype.subscribe=function(t){var n=this;return de(function(){var i=n.value,o=z;z=void 0;try{t(i)}finally{z=o}},{name:"sub"})};B.prototype.valueOf=function(){return this.value};B.prototype.toString=function(){return this.value+""};B.prototype.toJSON=function(){return this.value};B.prototype.peek=function(){var t=z;z=void 0;try{return this.value}finally{z=t}};Object.defineProperty(B.prototype,"value",{get:function(){var t=Ti(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(In>100)throw new Error("Cycle detected");this.v=t,this.i++,qt++,ye++;try{for(var n=this.t;n!==void 0;n=n.x)n.t.N()}finally{rn()}}}});function v(t,n){return new B(t,n)}function Li(t){for(var n=t.s;n!==void 0;n=n.n)if(n.S.i!==n.i||!n.S.h()||n.S.i!==n.i)return!0;return!1}function Bi(t){for(var n=t.s;n!==void 0;n=n.n){var i=n.S.n;if(i!==void 0&&(n.r=i),n.S.n=n,n.i=-1,n.n===void 0){t.s=n;break}}}function ji(t){for(var n=t.s,i=void 0;n!==void 0;){var o=n.p;n.i===-1?(n.S.U(n),o!==void 0&&(o.n=n.n),n.n!==void 0&&(n.n.p=o)):i=n,n.S.n=n.r,n.r!==void 0&&(n.r=void 0),n=o}t.s=i}function Me(t,n){B.call(this,void 0),this.x=t,this.s=void 0,this.g=qt-1,this.f=4,this.W=n?.watched,this.Z=n?.unwatched,this.name=n?.name}Me.prototype=new B;Me.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===qt))return!0;if(this.g=qt,this.f|=1,this.i>0&&!Li(this))return this.f&=-2,!0;var t=z;try{Bi(this),z=this;var n=this.x();(16&this.f||this.v!==n||this.i===0)&&(this.v=n,this.f&=-17,this.i++)}catch(i){this.v=i,this.f|=16,this.i++}return z=t,ji(this),this.f&=-2,!0};Me.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var n=this.s;n!==void 0;n=n.n)n.S.S(n)}B.prototype.S.call(this,t)};Me.prototype.U=function(t){if(this.t!==void 0&&(B.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var n=this.s;n!==void 0;n=n.n)n.S.U(n)}};Me.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(Me.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=Ti(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function Ke(t,n){return new Me(t,n)}function Oi(t){var n=t.u;if(t.u=void 0,typeof n=="function"){ye++;var i=z;z=void 0;try{n()}catch(o){throw t.f&=-2,t.f|=8,jn(t),o}finally{z=i,rn()}}}function jn(t){for(var n=t.s;n!==void 0;n=n.n)n.S.U(n);t.x=void 0,t.s=void 0,Oi(t)}function mo(t){if(z!==this)throw new Error("Out-of-order effect");ji(this),z=t,this.f&=-2,8&this.f&&jn(this),rn()}function Qe(t,n){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=n?.name}Qe.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var n=this.x();typeof n=="function"&&(this.u=n)}finally{t()}};Qe.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Oi(this),Bi(this),ye++;var t=z;return z=this,mo.bind(this,t)};Qe.prototype.N=function(){2&this.f||(this.f|=2,this.o=ut,ut=this)};Qe.prototype.d=function(){this.f|=8,1&this.f||jn(this)};Qe.prototype.dispose=function(){this.d()};function de(t,n){var i=new Qe(t,n);try{i.c()}catch(r){throw i.d(),r}var o=i.d.bind(i);return o[Symbol.dispose]=o,o}var Wi,pn,ln=typeof window<"u"&&!!window.__PREACT_SIGNALS_DEVTOOLS__,Hi=[];de(function(){Wi=this.N})();function Ze(t,n){I[t]=n.bind(null,I[t]||function(){})}function Jt(t){pn&&pn(),pn=t&&t.S()}function Gi(t){var n=this,i=t.data,o=xo(i);o.value=i;var r=Pi(function(){for(var s=n,d=n.__v;d=d.__;)if(d.__c){d.__c.__$f|=4;break}var c=Ke(function(){var h=o.value.value;return h===0?0:h===!0?"":h||""}),f=Ke(function(){return!Array.isArray(c.value)&&!_i(c.value)}),p=de(function(){if(this.N=Ui,f.value){var h=c.value;s.__v&&s.__v.__e&&s.__v.__e.nodeType===3&&(s.__v.__e.data=h)}}),u=n.__$u.d;return n.__$u.d=function(){p(),u.call(this)},[f,c]},[]),l=r[0],a=r[1];return l.value?a.peek():a.value}Gi.displayName="ReactiveTextNode";Object.defineProperties(B.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Gi},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Ze("__b",function(t,n){if(ln&&typeof n.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof n.type=="string"){var i,o=n.props;for(var r in o)if(r!=="children"){var l=o[r];l instanceof B&&(i||(n.__np=i={}),i[r]=l,o[r]=l.peek())}}t(n)});Ze("__r",function(t,n){if(ln&&typeof n.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(n),n.type!==R){Jt();var i,o=n.__c;o&&(o.__$f&=-2,(i=o.__$u)===void 0&&(o.__$u=i=(function(r){var l;return de(function(){l=this}),l.c=function(){o.__$f|=1,o.setState({})},l})())),Jt(i)}t(n)});Ze("__e",function(t,n,i,o){ln&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Jt(),t(n,i,o)});Ze("diffed",function(t,n){ln&&typeof n.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Jt();var i;if(typeof n.type=="string"&&(i=n.__e)){var o=n.__np,r=n.props;if(o){var l=i.U;if(l)for(var a in l){var s=l[a];s!==void 0&&!(a in o)&&(s.d(),l[a]=void 0)}else l={},i.U=l;for(var d in o){var c=l[d],f=o[d];c===void 0?(c=yo(i,d,f,r),l[d]=c):c.o(f,r)}}}t(n)});function yo(t,n,i,o){var r=n in t&&t.ownerSVGElement===void 0,l=v(i);return{o:function(a,s){l.value=a,o=s},d:de(function(){this.N=Ui;var a=l.value.value;o[n]!==a&&(o[n]=a,r?t[n]=a:a!=null&&(a!==!1||n[4]==="-")?t.setAttribute(n,a):t.removeAttribute(n))})}}Ze("unmount",function(t,n){if(typeof n.type=="string"){var i=n.__e;if(i){var o=i.U;if(o){i.U=void 0;for(var r in o){var l=o[r];l&&l.d()}}}}else{var a=n.__c;if(a){var s=a.__$u;s&&(a.__$u=void 0,s.d())}}t(n)});Ze("__h",function(t,n,i,o){(o<3||o===9)&&(n.__$f|=2),t(n,i,o)});dt.prototype.shouldComponentUpdate=function(t,n){var i=this.__$u,o=i&&i.s!==void 0;for(var r in n)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var l=2&this.__$f;if(!(o||l||4&this.__$f)||1&this.__$f)return!0}else if(!(o||4&this.__$f)||3&this.__$f)return!0;for(var a in t)if(a!=="__source"&&t[a]!==this.props[a])return!0;for(var s in this.props)if(!(s in t))return!0;return!1};function xo(t,n){return le(function(){return v(t,n)})[0]}var bo=function(t){queueMicrotask(function(){queueMicrotask(t)})};function _o(){vo(function(){for(var t;t=Hi.shift();)Wi.call(t)})}function Ui(){Hi.push(this)===1&&(I.requestAnimationFrame||bo)(_o)}const wo={apiKey:"AIzaSyCr-Ej5jeuV3kdvquu2W_R0ffSrUW0OUcQ",authDomain:"tennis-coordinator-43f53.firebaseapp.com",databaseURL:"https://tennis-coordinator-43f53-default-rtdb.firebaseio.com",projectId:"tennis-coordinator-43f53",storageBucket:"tennis-coordinator-43f53.firebasestorage.app",messagingSenderId:"665148711646",appId:"1:665148711646:web:66d14722800a12f5a3184f",measurementId:"G-J0KVB2Q93W"};let Te=null;function Vi(){if(Te)return Te;try{return window.firebase.initializeApp(wo),Te=window.firebase.database(),console.log("Firebase initialized successfully"),Te}catch(t){throw console.error("Firebase initialization error:",t),t}}function M(){return Te||Vi()}function ko(){return e("div",{class:"landing-page",children:e("div",{class:"landing-container",children:[e("h1",{children:"ðŸŽ¾ Tennis Coordinator"}),e("p",{class:"landing-tagline",children:"Turn your love for tennis into more games."}),e("p",{class:"landing-subtitle",children:"A simple tool that helps tennis groups self-organize matches with minimal frictionâ€”so you spend less time coordinating and more time on the court."}),e("div",{class:"landing-section",children:[e("h2",{children:"Why It Works"}),e("div",{class:"landing-features",children:[e("div",{class:"feature-item",children:[e("span",{class:"feature-icon",children:"â™¦"}),e("div",{children:[e("strong",{children:"Frictionless"}),e("span",{children:"Check in with a few taps. No accounts, no apps to download."})]})]}),e("div",{class:"feature-item",children:[e("span",{class:"feature-icon",children:"â™¦"}),e("div",{children:[e("strong",{children:"Flexible"}),e("span",{children:"Handles doubles, singles, odd numbers, guests, and preferences."})]})]}),e("div",{class:"feature-item",children:[e("span",{class:"feature-icon",children:"â™¦"}),e("div",{children:[e("strong",{children:"Adaptable"}),e("span",{children:"Works for tight-knit groups of 20 or club communities of 50+."})]})]}),e("div",{class:"feature-item",children:[e("span",{class:"feature-icon",children:"â™¦"}),e("div",{children:[e("strong",{children:"Real-Time"}),e("span",{children:"Everyone sees who's playing instantly."})]})]})]})]}),e("div",{class:"landing-section landing-section-alt",children:[e("h2",{children:"How It Works"}),e("div",{class:"landing-steps",children:[e("div",{class:"step-item",children:[e("span",{class:"step-number",children:"1"}),e("div",{children:[e("strong",{children:"Check In"}),e("span",{children:"Select your name, play style, and when you're available"})]})]}),e("div",{class:"step-item",children:[e("span",{class:"step-number",children:"2"}),e("div",{children:[e("strong",{children:"Auto-Match"}),e("span",{children:"System organizes matches based on who's playing"})]})]}),e("div",{class:"step-item",children:[e("span",{class:"step-number",children:"3"}),e("div",{children:[e("strong",{children:"Play"}),e("span",{children:"Show up and enjoy the game"})]})]})]})]}),e("div",{class:"landing-cta",children:e("p",{children:"To access your tennis group, visit your group's unique URL or contact your group admin for the link."})}),e("div",{class:"landing-footer",children:e("a",{href:"#admin",class:"admin-link",onClick:t=>{t.preventDefault(),window.location.hash="admin",window.location.reload()},children:"Site Administrator? Access Site Admin â†’"})})]})})}function An(t){return t.toLowerCase().trim().replace(/\s+/g," ")}function Dt(t){if(!t)return"";const[n,i]=t.split(":"),o=parseInt(n),r=o>=12?"PM":"AM";return`${o%12||12}:${i}${r}`}function ee(t,n){return!t&&!n?"":t&&n?`${Dt(t)}-${Dt(n)}`:t?`from ${Dt(t)}`:n?`until ${Dt(n)}`:""}function W(t){return new Date(t+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function Ki(t){const n=new Date(t),i=new Date,o=n.toDateString()===i.toDateString(),r=n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return o?r:`${n.toLocaleDateString("en-US",{month:"short",day:"numeric"})} ${r}`}function Mn(t){const n=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${n}-${i}-${o}`}function Co(){return Mn(new Date)}function So(t,n){let i=null;return function(...o){i&&clearTimeout(i),i=setTimeout(()=>{t.apply(this,o)},n)}}const N=v({groupPin:"",adminPin:""}),V=v({});function U(t){return M().ref(t)}function $o(){j(()=>{const t=de(()=>{const n=S.value;if(!n||n==="admin")return;U(`groups/${n}/settings`).once("value").then(o=>{const r=o.val()||{};G.value=r.groupName||"Unknown Group",T.value=r.members||[],L.value=r.memberDetails||{},N.value={groupPin:r.groupPin||"",adminPin:r.adminPin||"",shortCode:r.shortCode,location:r.location,groupDescription:r.groupDescription,groupRules:r.groupRules},document.title=`${r.groupName||"Tennis"} - Tennis Coordinator`}).catch(o=>{console.error("Error loading group settings:",o),y("Failed to load group data","error")})});return()=>{t()}},[])}function zo(){j(()=>{let t=null,n=null;const i=de(()=>{const o=S.value;t&&n&&t.off("value",n),!(!o||o==="admin")&&(t=U(`groups/${o}/checkins`),n=t.on("value",r=>{const l=r.val()||{};J.value=l}))});return()=>{i(),t&&n&&t.off("value",n)}},[])}function Io(){j(()=>{let t=null,n=null;const i=de(()=>{const o=S.value,r=D.value;if(t&&n&&t.off("value",n),!o||o==="admin"||!r){V.value={};return}t=U(`groups/${o}/matchNotes/${r}`),n=t.on("value",l=>{V.value=l.val()||{}})});return()=>{i(),t&&n&&t.off("value",n)}},[])}function E(t){return t.toLowerCase().replace(/\s+/g,"")}async function Ao(t){const n=S.value,i=D.value;if(!n||!i)return;const o=U(`groups/${n}/checkins/${i}`),r=J.value[i]||[],l=E(t.name);if(r.some(d=>d.name&&E(d.name)===l)){y(`${t.name} is already checked in for this date!`,"error");return}const s={name:t.name,playStyle:t.playStyle,isGuest:t.isGuest,addedBy:t.addedBy,allowRotation:t.allowRotation,timestamp:Date.now()};t.timeRange&&(s.timeRange=t.timeRange);try{await o.set([...r,s]),y(`${t.name} checked in!`,"success"),await xe(n,i,"checkin",t.name,t.addedBy),await No(n,t.name,i,t.addedBy,{playStyle:t.playStyle,timeRange:t.timeRange,allowRotation:t.allowRotation})}catch(d){console.error("Error adding check-in:",d),y("Failed to check in","error")}}async function Mo(t,n,i){const o=S.value,r=D.value;if(!o||!r)return;const l=J.value[r]||[],a=l[t];if(!a)return;const s=a.name||"this person",d=i&&E(i)===E(s),c=a.addedBy&&i&&E(i)===E(a.addedBy),f=sessionStorage.getItem(`adminAuth_${o}`)==="true";if(!d&&!c&&!f){y("You can only edit check-ins you added","error");return}const p=U(`groups/${o}/checkins/${r}`),u=[...l];u[t]={...u[t],...n};try{await p.set(u),y(`${s}'s preferences updated`,"success")}catch(h){console.error("Error updating check-in:",h),y("Failed to update check-in","error")}}function Ro(t,n){const i=S.value,o=D.value;if(!i||!o)return null;const l=(J.value[o]||[])[t],a=l?.name||"this person",s=n&&E(n)===E(a),d=l?.addedBy&&n&&E(n)===E(l.addedBy),c=sessionStorage.getItem(`adminAuth_${i}`)==="true";return!s&&!d&&!c?(y("You can only remove check-ins you added","error"),null):{personName:a,isOwner:s}}async function Do(t,n){const i=S.value,o=D.value;if(!i||!o)return;const r=J.value[o]||[],a=r[t]?.name||"this person",s=n&&E(n)===E(a),d=U(`groups/${i}/checkins/${o}`),c=r.filter((f,p)=>p!==t);try{await d.set(c.length>0?c:null),y(`${a} removed`,"info"),s&&n&&(se.value=n,Y.value=!0),await xe(i,o,"removal",a,n),await Po(i,a,o,n)}catch(f){console.error("Error removing check-in:",f),y("Failed to remove check-in","error")}}async function xe(t,n,i,o,r,l={}){const a={timestamp:Date.now(),action:i,player:o,by:r||o,...l};Object.keys(a).forEach(s=>{a[s]===void 0&&delete a[s]});try{await M().ref(`groups/${t}/activity/${n}`).push(a)}catch(s){console.error("Error logging activity:",s)}}async function Po(t,n,i,o){const l=E(n)===E(o)?`ðŸŽ¾ ${n} removed themselves from ${i}`:`ðŸŽ¾ ${n} was removed from ${i} by ${o}`;try{const a=M(),d=(await a.ref(`groups/${t}/userNotifications`).once("value")).val()||{};for(const[c,f]of Object.entries(d)){const p=f.preferences||{};if(p.activityAlerts){if(c===E(o))continue;const u=p.unwatchedMembers||p.mutedMembers||[];if(u.includes(n)||u.includes(o))continue;await a.ref(`groups/${t}/userNotifications/${c}/notifications`).push().set({message:l,timestamp:Date.now(),read:!1,date:i})}}}catch(a){console.error("Error sending removal notifications:",a)}}function Fo(t){switch(t){case"singles":return"Singles";case"doubles":return"Doubles";default:return"Either"}}async function No(t,n,i,o,r){const l=E(n)===E(o),a=[];if(r.playStyle&&a.push(Fo(r.playStyle)),r.timeRange){const c=ee(r.timeRange.start,r.timeRange.end);c&&a.push(c)}r.playStyle==="singles"&&r.allowRotation===!1&&a.push("No 3s");const s=a.length>0?` (${a.join(", ")})`:"",d=l?`ðŸŽ¾ ${n} checked in for ${i}${s}`:`ðŸŽ¾ ${n} was added for ${i} by ${o}${s}`;console.log("[notifyCheckinAlert] Starting notification for:",{playerName:n,date:i,addedBy:o});try{const c=M(),p=(await c.ref(`groups/${t}/userNotifications`).once("value")).val()||{};console.log("[notifyCheckinAlert] Found userNotifications entries:",Object.keys(p));for(const[u,h]of Object.entries(p)){const g=h.preferences||{};if(console.log(`[notifyCheckinAlert] User ${u}:`,{activityAlerts:g.activityAlerts,unwatchedMembers:g.unwatchedMembers||g.mutedMembers}),g.activityAlerts){if(u===E(o)){console.log(`[notifyCheckinAlert] Skipping ${u} - is addedBy`);continue}if(u===E(n)){console.log(`[notifyCheckinAlert] Skipping ${u} - is player`);continue}const x=g.unwatchedMembers||g.mutedMembers||[];if(x.includes(n)||x.includes(o)){console.log(`[notifyCheckinAlert] Skipping ${u} - player/adder is unwatched`);continue}console.log(`[notifyCheckinAlert] Sending notification to ${u}`),await c.ref(`groups/${t}/userNotifications/${u}/notifications`).push().set({message:d,timestamp:Date.now(),read:!1,date:i}),console.log(`[notifyCheckinAlert] Notification sent to ${u}`)}}}catch(c){console.error("Error sending check-in notifications:",c)}}async function hn(t,n,i,o,r,l){const a=o.replace(/-/g," ").replace(/\b\w/g,d=>d.toUpperCase()).replace("Forming 1","(forming)");let s;if(r==="added"){const d=l&&l.length>30?l.substring(0,30)+"...":l;s=`ðŸ“ ${i} added note to ${a}: "${d}"`}else if(r==="updated"){const d=l&&l.length>30?l.substring(0,30)+"...":l;s=`ðŸ“ ${i} updated note on ${a}: "${d}"`}else s=`ðŸ“ ${i} removed note from ${a}`;try{const d=M(),f=(await d.ref(`groups/${t}/userNotifications`).once("value")).val()||{};for(const[p,u]of Object.entries(f)){const h=u.preferences||{};if(h.activityAlerts){if(p===E(i)||(h.unwatchedMembers||h.mutedMembers||[]).includes(i))continue;await d.ref(`groups/${t}/userNotifications/${p}/notifications`).push().set({message:s,timestamp:Date.now(),read:!1,date:n})}}}catch(d){console.error("Error sending note notifications:",d)}}async function Eo(){const t=S.value,n=D.value;if(!(!t||!n))try{await U(`groups/${t}/checkins/${n}`).remove(),await U(`groups/${t}/matchNotes/${n}`).remove(),y("Day reset","success")}catch(i){console.error("Error resetting day:",i),y("Failed to reset day","error")}}const Pt={};async function To(t,n){const i=S.value,o=D.value;if(!(!i||!o))try{const r=`${i}:${o}:${t}`,l=Pt[r]??V.value[t]??"",a=C.value||"Unknown";await U(`groups/${i}/matchNotes/${o}/${t}`).set(n||null),n&&!l?(await xe(i,o,"note_added",a,a,{matchKey:t,noteContent:n}),await hn(i,o,a,t,"added",n),Pt[r]=n,y("Note added","success")):n&&l&&n!==l?(await xe(i,o,"note_updated",a,a,{matchKey:t,noteContent:n,previousNote:l}),await hn(i,o,a,t,"updated",n),Pt[r]=n,y("Note updated","success")):!n&&l&&(await xe(i,o,"note_removed",a,a,{matchKey:t,previousNote:l}),await hn(i,o,a,t,"removed"),delete Pt[r],y("Note removed","info"))}catch(r){console.error("Error saving match note:",r),y("Failed to save note","error")}}async function Lo(t){const n=S.value;if(!n)return;const i=U(`groups/${n}/settings`);try{const r=(await i.once("value")).val()||{},l=r.members||[],a=r.memberDetails||{};if(l.includes(t.name)){y("Member already exists","error");return}const s=[...l,t.name].sort(),d={...a,[t.name]:{addedBy:t.addedBy,addedDate:new Date().toISOString(),phone:t.phone||"",email:t.email||"",notes:t.notes||""}};await i.update({members:s,memberDetails:d});const c=D.value||new Date().toISOString().split("T")[0];await xe(n,c,"member_added",t.name,t.addedBy,{contact:t.phone||t.email||void 0,notes:t.notes||void 0}),y(`${t.name} added to members`,"success")}catch(o){console.error("Error adding member:",o),y("Failed to add member","error")}}async function Bo(t){const n=S.value;if(!n)return;const i=U(`groups/${n}/settings`);try{const r=(await i.once("value")).val()||{},l=r.members||[],a=r.memberDetails||{},s=l.filter(p=>p!==t),d={...a};delete d[t],await i.update({members:s,memberDetails:d}),T.value=s,L.value=d;const c=D.value||new Date().toISOString().split("T")[0],f=C.value||"Admin";await xe(n,c,"member_removed",t,f),y(`${t} removed from members`,"info")}catch(o){console.error("Error removing member:",o),y("Failed to remove member","error")}}async function ci(t,n){const i=S.value;if(!i)return!1;const o=U(`groups/${i}/settings`);try{const a=((await o.once("value")).val()||{}).memberDetails||{},s=a[t]||{},d={...a,[t]:{...s,phone:n.phone??s.phone??"",email:n.email??s.email??"",notes:n.notes??s.notes??""}};return await o.update({memberDetails:d}),L.value=d,y("Profile updated","success"),!0}catch(r){return console.error("Error updating member details:",r),y("Failed to update profile","error"),!1}}async function Yi(t,n){const i=S.value;if(!i)return!1;const o=n.trim();if(!o)return y("Name cannot be empty","error"),!1;if(o===t)return!0;const r=U(`groups/${i}/settings`);try{const a=(await r.once("value")).val()||{},s=a.members||[],d=a.memberDetails||{};if(s.some(m=>m.toLowerCase()===o.toLowerCase()&&m!==t))return y("A member with this name already exists","error"),!1;const c=s.map(m=>m===t?o:m).sort(),f={...d};f[t]&&(f[o]=f[t],delete f[t]),await r.update({members:c,memberDetails:f}),T.value=c,L.value=f;const p=M(),h=(await p.ref(`groups/${i}/checkins`).once("value")).val()||{};for(const[m,b]of Object.entries(h))if(b&&typeof b=="object"){const _=Object.values(b);let w=!1;const k=_.map($=>$&&$.name===t?(w=!0,{...$,name:o}):$);w&&await p.ref(`groups/${i}/checkins/${m}`).set(k)}const g=D.value||new Date().toISOString().split("T")[0],x=C.value||"Admin";return await xe(i,g,"member_renamed",o,x,{oldName:t}),y(`${t} renamed to ${o}`,"success"),!0}catch(l){return console.error("Error renaming member:",l),y("Failed to rename member","error"),!1}}function be({isOpen:t,onClose:n,title:i,subtitle:o,children:r,showCloseButton:l=!0}){return t?e("div",{class:"modal active",onClick:a=>{a.target===a.currentTarget&&n&&n()},children:e("div",{class:"modal-content",onClick:a=>a.stopPropagation(),children:[e("div",{class:"modal-header",children:[e("div",{children:[e("h2",{children:i}),o&&e("p",{style:"font-size: 12px; color: #666; margin: 4px 0 0 0;",children:o})]}),l&&n&&e("button",{class:"close-btn",onClick:n,children:"Ã—"})]}),r]})}):null}v(!1);function an(t){return t.toLowerCase().replace(/\s+/g,"")}v(!1);v(!1);v([]);v(!1);const sn=v([]);v(!1);let je=null;function jo(){const t=S.value,n=C.value;if(!(!t||!n)){je&&je();try{const o=M().ref(`groups/${t}/userNotifications/${an(n)}/notifications`),r=o.on("value",l=>{const a=l.val()||{},s=Object.entries(a).map(([d,c])=>({id:d,...c}));sn.value=s.sort((d,c)=>c.timestamp-d.timestamp)});je=()=>{o.off("value",r)}}catch(i){console.error("Error subscribing to notifications:",i)}}}async function Oo(t){const n=S.value,i=C.value;if(!(!n||!i))try{await M().ref(`groups/${n}/userNotifications/${an(i)}/notifications/${t}/read`).set(!0)}catch(o){console.error("Error marking notification as read:",o)}}function Wo(){j(()=>{const t=S.value,n=C.value;return t&&n&&jo(),()=>{je&&(je(),je=null)}},[S.value,C.value])}async function Ho(t){const n=S.value,i=C.value;if(!(!n||!i))try{await M().ref(`groups/${n}/userNotifications/${an(i)}/notifications/${t}`).remove()}catch(o){console.error("Error clearing notification:",o)}}async function Go(){const t=S.value,n=C.value;if(!(!t||!n))try{const i=M(),o={};sn.value.forEach(r=>{r.read||(o[`${r.id}/read`]=!0)}),Object.keys(o).length>0&&await i.ref(`groups/${t}/userNotifications/${an(n)}/notifications`).update(o)}catch(i){console.error("Error marking all as read:",i)}}const te=v("checkin");function Uo(){te.value="profile"}const fn=Ke(()=>sn.value.filter(t=>!t.read).length),Vo=[{id:"checkin",label:"Check-in",icon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/></svg>',activeIcon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/></svg>'},{id:"matches",label:"My Games",icon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>',activeIcon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>'},{id:"notifications",label:"Alerts",icon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg>',activeIcon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg>'},{id:"help",label:"Help",icon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>',activeIcon:'<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>'}];function Ko(){return e("nav",{style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"480px",height:"64px",background:"#fff",borderTop:"1px solid #e0e0e0",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:1e3,paddingBottom:"env(safe-area-inset-bottom)",boxShadow:"0 -2px 10px rgba(0,0,0,0.1)"},children:Vo.map(t=>{const n=te.value===t.id,i=t.id==="notifications"&&fn.value>0;return e("button",{onClick:()=>{te.value=t.id},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"2px",background:"none",border:"none",padding:"8px 12px",cursor:"pointer",color:n?"#4CAF50":"#666",position:"relative",minWidth:"60px"},children:[e("div",{style:{position:"relative"},dangerouslySetInnerHTML:{__html:n?t.activeIcon:t.icon}}),i&&e("span",{style:{position:"absolute",top:"2px",right:"8px",background:"#f44336",color:"white",fontSize:"10px",padding:"1px 5px",borderRadius:"10px",minWidth:"16px",textAlign:"center"},children:fn.value>9?"9+":fn.value}),e("span",{style:{fontSize:"10px",fontWeight:n?"600":"400"},children:t.label})]},t.id)})})}const Oe=v(!1),ze=v(!1);function di(){const t=S.value;return t?sessionStorage.getItem(`adminAuth_${t}`)==="true":!1}function Yo(){const[t,n]=le(di());return j(()=>{const i=setInterval(()=>{n(di())},1e3);return()=>clearInterval(i)},[]),e("h1",{style:"display: flex; justify-content: space-between; align-items: center;",children:[e("span",{children:[e("span",{id:"groupNameDisplay",children:["ðŸŽ¾ ",G.value||"Tennis Coordinator"]}),G.value&&e(R,{children:[e("br",{}),e("small",{style:"font-size: 12px; font-weight: 400; opacity: 0.8;",children:"Tennis Coordinator"})]})]}),C.value&&e("button",{onClick:Uo,style:{display:"flex",alignItems:"center",gap:"6px",background:t?"#FFF3E0":"#f5f5f5",border:t?"2px solid #FF9800":"1px solid #e0e0e0",borderRadius:"20px",padding:"6px 12px",fontSize:"14px",fontWeight:"500",color:"#333",cursor:"pointer"},children:[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",style:"opacity: 0.7;",children:e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),e("span",{children:C.value}),t&&e("span",{style:{background:"#FF9800",color:"white",fontSize:"10px",padding:"2px 6px",borderRadius:"10px",fontWeight:"600"},children:"ADMIN"})]})]})}const Ft=v(""),et=v("");function qo({isOpen:t,groupName:n,correctPin:i,onSuccess:o}){const r=a=>{a.preventDefault(),Ft.value===i?(et.value="",Ft.value="",o()):(et.value="Invalid PIN. Please try again.",y("Invalid PIN","error"))},l=a=>{Ft.value=a.target.value,et.value=""};return e(be,{isOpen:t,title:`Welcome to ${n||"Tennis Coordinator"}`,showCloseButton:!1,children:e("div",{style:"text-align: center; padding: 20px 0;",children:[e("p",{style:"font-size: 48px; margin-bottom: 16px;",children:"ðŸŽ¾"}),e("p",{style:"color: #666; margin-bottom: 24px;",children:"Enter the group PIN to access check-ins"}),e("form",{onSubmit:r,children:[e("input",{type:"password",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Enter PIN",value:Ft.value,onInput:l,style:`
              width: 100%;
              padding: 16px;
              font-size: 24px;
              text-align: center;
              border: 2px solid #e0e0e0;
              border-radius: 12px;
              margin-bottom: 16px;
              letter-spacing: 8px;
            `,autoFocus:!0}),et.value&&e("p",{style:"color: #f44336; font-size: 14px; margin-bottom: 16px;",children:et.value}),e("button",{type:"submit",style:`
              width: 100%;
              padding: 16px;
              background: #4CAF50;
              color: white;
              border: none;
              border-radius: 12px;
              font-size: 18px;
              font-weight: 600;
              cursor: pointer;
            `,children:"Enter"})]}),e("p",{style:"font-size: 12px; color: #999; margin-top: 16px;",children:"Don't know the PIN? Ask your group admin."})]})})}const On=v(!1),Wn=v(""),Hn=v(""),Gn=v("");function Un(t){const n=G.value||"our tennis group",i=S.value,o=window.location.href.split("?")[0]+"?group="+i,r=N.value.groupPin||"";return`Hi ${t}! You've been added to ${n} tennis coordination.

Check in for upcoming matches here:
${o}

PIN: ${r}

Just select your name and check in when you can play!`}function Jo(t,n){const i=t.replace(/[\s\-\(\)]/g,""),o=navigator.userAgent||"";return/iPad|iPhone|iPod/.test(o)?`sms:${i}&body=${encodeURIComponent(n)}`:`sms:${i}?body=${encodeURIComponent(n)}`}function Qo(t,n,i){return`mailto:${t}?subject=${encodeURIComponent(n)}&body=${encodeURIComponent(i)}`}async function Zo(t){const n=Un(t),i=G.value||"Tennis Group";try{await navigator.share({title:`Join ${i}`,text:n}),Ie(),y("Shared successfully!","success")}catch(o){o.name!=="AbortError"&&(console.error("Share failed:",o),qi(t))}}async function qi(t){const n=Un(t);try{await navigator.clipboard.writeText(n),Ie(),y("Message copied! Paste in SMS or email.","success")}catch{const o=document.createElement("textarea");o.value=n,o.style.position="fixed",o.style.left="-9999px",document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),Ie(),y("Message copied! Paste in SMS or email.","success")}}function Ie(){On.value=!1,Wn.value="",Hn.value="",Gn.value=""}function Ji(t,n,i){Wn.value=t,Hn.value=n||"",Gn.value=i||"",On.value=!0}function Xo(){const t=Wn.value,n=Hn.value,i=Gn.value,o=Un(t),r=G.value||"Tennis Group",l=typeof navigator<"u"&&navigator.share!==void 0;return e(be,{isOpen:On.value,onClose:Ie,title:"",showCloseButton:!1,children:e("div",{style:{textAlign:"center",padding:"10px 0"},children:[e("h3",{style:{margin:"0 0 12px 0",fontSize:"16px"},children:["Invite ",t,"?"]}),e("p",{style:{margin:"0 0 16px 0",color:"#666",fontSize:"14px"},children:"Send them an invite with the group link and PIN"}),e("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[n&&e("a",{href:Jo(n,o),onClick:()=>setTimeout(Ie,500),style:{background:"#25D366",color:"white",padding:"12px 20px",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",textDecoration:"none"},children:[e("span",{children:"ðŸ“±"})," Text ",n]}),i&&e("a",{href:Qo(i,`You're invited to ${r}`,o),onClick:()=>setTimeout(Ie,500),style:{background:"#4285F4",color:"white",padding:"12px 20px",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",textDecoration:"none"},children:[e("span",{children:"ðŸ“§"})," Email"]}),l&&e("button",{onClick:()=>Zo(t),style:{background:"#9C27B0",color:"white",padding:"12px 20px",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"ðŸ“¤"})," Other"]}),e("button",{onClick:()=>qi(t),style:{background:"#607D8B",color:"white",padding:"12px 20px",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"ðŸ“‹"})," Copy"]})]}),e("button",{onClick:Ie,style:{marginTop:"12px",background:"none",border:"none",color:"#999",fontSize:"14px",cursor:"pointer"},children:"Skip"})]})})}const cn=v(!1),Qt=v(""),Ye=v(null),Zt=v(""),vt=v(""),mt=v(""),yt=v(""),Se=v("");async function ui(){const t=Qt.value.trim();if(!t)return;const n=S.value;if(n){if(T.value.includes(t)){y("Member already exists","error");return}try{const o=M().ref(`groups/${n}/settings`),r=[...T.value,t].sort();await o.update({members:r}),T.value=r,Qt.value="",y(`${t} added`,"success")}catch(i){console.error("Error adding member:",i),y("Failed to add member","error")}}}function er(t){confirm(`Remove ${t} from the group?`)&&Bo(t)}function tr(t){Ye.value=t,Zt.value=t;const n=L.value[t]||{};vt.value=n.phone||"",mt.value=n.email||"",yt.value=n.notes||""}async function nr(){const t=Ye.value;if(!t)return;const n=S.value;if(!n)return;const i=Zt.value.trim();try{if(i!==t&&!await Yi(t,i))return;const o=i!==t?i:t;await M().ref(`groups/${n}/settings/memberDetails/${o}`).update({phone:vt.value,email:mt.value,notes:yt.value}),L.value={...L.value,[o]:{...L.value[o]||{},phone:vt.value,email:mt.value,notes:yt.value}},Ye.value=null,i===t&&y("Member updated","success")}catch(o){console.error("Error updating member:",o),y("Failed to update member","error")}}function ir(){cn.value=!1,Ye.value=null,Se.value=""}function or(){const t=T.value.filter(n=>n.toLowerCase().includes(Se.value.toLowerCase())).sort((n,i)=>n.localeCompare(i));return e(be,{isOpen:cn.value,onClose:ir,title:"Manage Members",subtitle:`${T.value.length} members in group`,children:[Ye.value&&e("div",{style:"position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1001;",children:e("div",{style:"background: white; padding: 24px; border-radius: 12px; max-width: 400px; width: 90%;",children:[e("h3",{style:"margin-top: 0;",children:"Edit Member"}),e("div",{style:"margin-bottom: 12px;",children:[e("label",{style:"font-size: 12px; color: #666; display: block; margin-bottom: 4px;",children:"Name"}),e("input",{type:"text",placeholder:"Member name",value:Zt.value,onInput:n=>{Zt.value=n.target.value},style:"width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; box-sizing: border-box;"})]}),e("div",{style:"margin-bottom: 12px;",children:[e("label",{style:"font-size: 12px; color: #666; display: block; margin-bottom: 4px;",children:"Phone"}),e("input",{type:"tel",placeholder:"Phone number",value:vt.value,onInput:n=>{vt.value=n.target.value},style:"width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; box-sizing: border-box;"})]}),e("div",{style:"margin-bottom: 12px;",children:[e("label",{style:"font-size: 12px; color: #666; display: block; margin-bottom: 4px;",children:"Email"}),e("input",{type:"email",placeholder:"Email address",value:mt.value,onInput:n=>{mt.value=n.target.value},style:"width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; box-sizing: border-box;"})]}),e("div",{style:"margin-bottom: 16px;",children:[e("label",{style:"font-size: 12px; color: #666; display: block; margin-bottom: 4px;",children:"Notes"}),e("textarea",{placeholder:"Notes (skill level, etc.)",rows:2,value:yt.value,onInput:n=>{yt.value=n.target.value},style:"width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; resize: vertical; box-sizing: border-box;"})]}),e("div",{style:"display: flex; gap: 8px;",children:[e("button",{onClick:()=>{Ye.value=null},style:"flex: 1; background: #ccc; color: #333;",children:"Cancel"}),e("button",{onClick:nr,style:"flex: 1; background: #4CAF50; color: white;",children:"Save"})]})]})}),e("div",{style:"margin-bottom: 16px;",children:e("div",{style:"position: relative;",children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#999",style:"position: absolute; left: 12px; top: 50%; transform: translateY(-50%);",children:e("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),e("input",{type:"text",placeholder:"Search members...",value:Se.value,onInput:n=>{Se.value=n.target.value},style:"width: 100%; padding: 12px 12px 12px 40px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; box-sizing: border-box;"}),Se.value&&e("button",{onClick:()=>{Se.value=""},style:"position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 0;",children:e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#999",children:e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})}),e("div",{style:"max-height: 400px; overflow-y: auto; margin-bottom: 16px;",children:t.length===0?e("div",{style:"text-align: center; padding: 20px; color: #888;",children:Se.value?"No members found":"No members yet"}):t.map(n=>{const i=L.value[n],o=i&&(i.phone||i.email||i.addedBy),r=i&&(i.phone||i.email),l=i?.addedDate?new Date(i.addedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null;return e("div",{style:"flex-direction: column; align-items: flex-start; padding: 12px; background: #f9f9f9; border-radius: 8px; margin-bottom: 8px;",children:[e("div",{style:"display: flex; justify-content: space-between; width: 100%; align-items: center;",children:[e("span",{style:"font-weight: 500;",children:n}),e("div",{style:"display: flex; gap: 4px;",children:[e("button",{onClick:()=>tr(n),style:{background:"rgba(76, 175, 80, 0.1)",color:"#4CAF50",border:"none",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},title:"Edit",children:e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),r&&e("button",{onClick:()=>Ji(n,i?.phone,i?.email),style:{background:"rgba(33, 150, 243, 0.1)",color:"#2196F3",border:"none",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},title:"Invite",children:e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),e("button",{onClick:()=>er(n),style:{background:"rgba(255, 82, 82, 0.1)",color:"#e57373",border:"none",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},title:"Remove",children:e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),o&&e("div",{style:"font-size: 12px; color: #666; margin-top: 8px; padding-left: 12px; border-left: 3px solid #4CAF50;",children:[i.addedBy&&e("div",{children:["Added by: ",e("strong",{children:i.addedBy}),l&&` on ${l}`]}),i.phone&&e("div",{children:["ðŸ“± ",i.phone]}),i.email&&e("div",{children:["ðŸ“§ ",i.email]}),i.notes&&e("div",{children:["Notes: ",i.notes]})]})]},n)})}),e("div",{style:"display: flex; gap: 8px; padding-top: 12px; border-top: 1px solid #e0e0e0;",children:[e("input",{type:"text",placeholder:"New member name",value:Qt.value,onInput:n=>{Qt.value=n.target.value},onKeyPress:n=>{n.key==="Enter"&&ui()},style:"flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px;"}),e("button",{onClick:ui,style:"padding: 12px 24px; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;",children:"Add"})]})]})}const We=v(""),xt=v(""),bt=v(""),Ae=v(""),He=v(""),Ge=v(""),_t=v(""),wt=v(""),Vn=v(!0),kt=v(""),Rn=v(!1);function rr(){const t=S.value;if(!t)return!1;const n=`adminAuth_${t}`;return sessionStorage.getItem(n)==="true"}function lr(){const t=S.value;t&&(sessionStorage.setItem(`adminAuth_${t}`,"true"),Rn.value=!0)}function ar(){We.value=G.value||"",xt.value=N.value.adminPin||"",bt.value=N.value.groupPin||"",Ae.value=N.value.location?.name||"",He.value=N.value.location?.lat?.toString()||"",Ge.value=N.value.location?.lon?.toString()||"",_t.value=N.value.groupDescription||"",wt.value=N.value.groupRules||"",Rn.value=rr(),Vn.value=!Rn.value&&!!N.value.adminPin,kt.value=""}async function sr(t=!1){const n=S.value;if(n)try{const o=M().ref(`groups/${n}/settings`),r={groupName:We.value,adminPin:xt.value,groupPin:bt.value,groupDescription:_t.value||null,groupRules:wt.value||null};Ae.value&&He.value&&Ge.value&&(r.location={name:Ae.value,lat:parseFloat(He.value),lon:parseFloat(Ge.value)}),await o.update(r),G.value=We.value,N.value={...N.value,adminPin:xt.value,groupPin:bt.value,location:Ae.value?{name:Ae.value,lat:parseFloat(He.value),lon:parseFloat(Ge.value)}:void 0,groupDescription:_t.value||void 0,groupRules:wt.value||void 0},y("Settings saved","success"),t&&Dn()}catch(i){console.error("Error saving settings:",i),y("Failed to save settings","error")}}function pi(){kt.value===N.value.adminPin?(lr(),Vn.value=!1):(y("Incorrect PIN","error"),kt.value="")}function Dn(){ze.value=!1}function cr(){return ze.value&&We.value===""&&G.value&&ar(),e(be,{isOpen:ze.value,onClose:Dn,title:"Admin Settings",subtitle:`Managing: ${G.value}`,children:Vn.value?e("div",{style:"padding: 20px; text-align: center;",children:[e("p",{style:"margin-bottom: 16px; color: #666;",children:"Enter admin PIN to access settings"}),e("input",{type:"password",placeholder:"Admin PIN",value:kt.value,onInput:t=>{kt.value=t.target.value},onKeyPress:t=>{t.key==="Enter"&&pi()},style:"width: 100%; max-width: 200px; padding: 12px; text-align: center; font-size: 18px; border: 2px solid #e0e0e0; border-radius: 8px; margin-bottom: 16px;"}),e("br",{}),e("button",{onClick:pi,style:"padding: 12px 32px; background: #4CAF50; color: white;",children:"Submit"})]}):e(R,{children:[e("div",{style:"margin-bottom: 16px;",children:e("button",{onClick:()=>{Oe.value=!0,ze.value=!1},style:"width: 100%; padding: 12px 16px; background: #f5f5f5; border: 1px solid #e0e0e0; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 10px; font-size: 14px; color: #333;",children:[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",style:"color: #666;",children:e("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})}),e("div",{style:"flex: 1; text-align: left;",children:[e("div",{style:"font-weight: 500;",children:"Activity History"}),e("div",{style:"font-size: 12px; color: #666;",children:"View all check-ins, changes, and match updates"})]}),e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",style:"color: #999;",children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]})}),e("div",{style:"margin-bottom: 16px;",children:e("button",{onClick:()=>{cn.value=!0,ze.value=!1},style:"width: 100%; padding: 12px 16px; background: #f5f5f5; border: 1px solid #e0e0e0; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 10px; font-size: 14px; color: #333;",children:[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",style:"color: #4CAF50;",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),e("div",{style:"flex: 1; text-align: left;",children:[e("div",{style:"font-weight: 500;",children:"Manage Members"}),e("div",{style:"font-size: 12px; color: #666;",children:"Add, edit, or remove group members"})]}),e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",style:"color: #999;",children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]})}),e("div",{style:"margin-bottom: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0;",children:e("div",{style:"display: flex; justify-content: space-between; align-items: center;",children:[e("h3",{style:"margin: 0; color: #333;",children:"Group Settings"}),e("span",{style:"font-size: 11px; color: #666; background: #f5f5f5; padding: 2px 8px; border-radius: 10px;",children:"Click Save to apply"})]})}),e("div",{class:"pref-section",children:[e("h3",{children:"Group Name"}),e("p",{style:"font-size: 12px; color: #666; margin-bottom: 8px;",children:"Display name for this tennis group"}),e("input",{type:"text",placeholder:"e.g., Tue/Thu Midday Doubles",value:We.value,onInput:t=>{We.value=t.target.value},style:"width: 100%; margin-bottom: 12px;"})]}),e("div",{class:"pref-section",children:[e("h3",{children:"Group Story"}),e("p",{style:"font-size: 12px; color: #666; margin-bottom: 8px;",children:"Tell your group's story - when/where you play, how it started, etc."}),e("textarea",{placeholder:"e.g., We're a group of friends who play doubles every Tuesday and Thursday at noon at Los Gatos High School courts...",value:_t.value,onInput:t=>{_t.value=t.target.value},rows:3,style:"width: 100%; margin-bottom: 12px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; resize: vertical; font-family: inherit; box-sizing: border-box;"})]}),e("div",{class:"pref-section",children:[e("h3",{children:"Rules & Tips"}),e("p",{style:"font-size: 12px; color: #666; margin-bottom: 8px;",children:"House rules, etiquette, and tips for new members (one per line)"}),e("textarea",{placeholder:`e.g.,
Check in by 10am on game days
Bring water and sunscreen
New balls provided by rotating member...`,value:wt.value,onInput:t=>{wt.value=t.target.value},rows:4,style:"width: 100%; margin-bottom: 12px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; resize: vertical; font-family: inherit; box-sizing: border-box;"})]}),e("div",{class:"pref-section",children:[e("h3",{children:"Admin PIN"}),e("p",{style:"font-size: 12px; color: #666; margin-bottom: 8px;",children:"Required to access admin settings"}),e("input",{type:"text",value:xt.value,onInput:t=>{xt.value=t.target.value},style:"width: 100%; margin-bottom: 12px;"})]}),e("div",{class:"pref-section",children:[e("h3",{children:"Group PIN"}),e("p",{style:"font-size: 12px; color: #666; margin-bottom: 8px;",children:"Share this PIN with all group members to access the app"}),e("input",{type:"text",value:bt.value,onInput:t=>{bt.value=t.target.value},style:"width: 100%; margin-bottom: 12px;"})]}),e("div",{class:"pref-section",children:[e("h3",{children:"Weather Location"}),e("p",{style:"font-size: 12px; color: #666; margin-bottom: 8px;",children:"Set the location for weather forecasts"}),e("input",{type:"text",placeholder:"Location name (e.g., Los Gatos, CA)",value:Ae.value,onInput:t=>{Ae.value=t.target.value},style:"width: 100%; margin-bottom: 8px;"}),e("div",{style:"display: flex; gap: 8px; margin-bottom: 12px;",children:[e("input",{type:"number",step:"0.0001",placeholder:"Latitude",value:He.value,onInput:t=>{He.value=t.target.value},style:"flex: 1;"}),e("input",{type:"number",step:"0.0001",placeholder:"Longitude",value:Ge.value,onInput:t=>{Ge.value=t.target.value},style:"flex: 1;"})]}),e("p",{style:"font-size: 11px; color: #999; margin-bottom: 12px;",children:["Tip: Use ",e("a",{href:"https://www.latlong.net/",target:"_blank",style:"color: #4CAF50;",children:"latlong.net"})," to find coordinates"]})]}),e("div",{style:"display: flex; gap: 8px; margin-top: 16px;",children:[e("button",{onClick:Dn,style:"flex: 1; background: #e0e0e0; color: #333;",children:"Close"}),e("button",{onClick:()=>sr(!0),style:"flex: 1; background: #4CAF50; color: white;",children:"Save & Close"})]})]})})}const Qi={login:{label:"Logins",actions:["user_login"]},checkin:{label:"Check-ins",actions:["check-in","checkin"]},removal:{label:"Removals",actions:["removal"]},shared:{label:"Shared",actions:["whatsapp_share"]},notes:{label:"Notes",actions:["notes_saved","note_added","note_updated","note_removed"]},members:{label:"Members",actions:["member_added","member_removed","member_renamed"]}},Ee=v(!1),Ct=v([]),Pn=v(!1),ne=v(new Set);async function dr(){const t=S.value;if(t){Pn.value=!0;try{const n=M();let i=[];const r=(await n.ref(`groups/${t}/activity`).once("value")).val();if(r){for(const[l,a]of Object.entries(r))if(a)for(const[s,d]of Object.entries(a))i.push({...d,date:l,firebaseKey:s})}i.sort((l,a)=>a.timestamp-l.timestamp),Ct.value=i}catch(n){console.error("Error loading activity:",n)}finally{Pn.value=!1}}}async function ur(t){const n=S.value;if(!(!n||!t.firebaseKey||!t.date)&&confirm("Remove this activity entry?"))try{await M().ref(`groups/${n}/activity/${t.date}/${t.firebaseKey}`).remove(),Ct.value=Ct.value.filter(o=>!(o.date===t.date&&o.firebaseKey===t.firebaseKey))}catch(i){console.error("Error deleting activity:",i),alert("Failed to delete activity")}}function pr(t){switch(t){case"singles":return"Singles";case"doubles":return"Doubles";default:return"Either"}}function hr(t){return Ki(t)}function fr(t){switch(t){case"check-in":case"checkin":return"âœ…";case"removal":return"âŒ";case"member_added":return"ðŸ‘¤";case"member_removed":return"ðŸš«";case"member_renamed":return"âœï¸";case"whatsapp_share":return"ðŸ“¤";case"notes_saved":case"note_added":return"ðŸ“";case"note_updated":return"âœï¸";case"note_removed":return"ðŸ—‘ï¸";case"user_login":return"ðŸ”“";default:return"ðŸ“‹"}}function gr(t){const{action:n,player:i,by:o,playStyle:r,timeRange:l,matchKey:a,type:s}=t;switch(n){case"check-in":case"checkin":{let d=`${i} checked in`;return o&&o!==i&&(d+=` (by ${o})`),r&&(d+=` - ${pr(r)}`,(l?.start||l?.end)&&(d+=` (${l.start||"anytime"}â€“${l.end||"anytime"})`)),d}case"removal":return o&&o!==i?`${o} removed ${i}`:`${i} removed themselves`;case"member_added":return`${o} added ${i} as member`;case"member_removed":return`${o} removed ${i} from members`;case"member_renamed":return`${o} renamed ${t.oldName} to ${i}`;case"whatsapp_share":{let c=`${o} shared ${s==="matches"?"matches":s==="checkin"?"check-in":"removal"} to WhatsApp`;return i&&i!==o&&(c+=` (for ${i})`),c}case"notes_saved":case"note_added":{const d=a?a.replace("-"," #").replace("forming 1","forming"):"match",c=t.noteContent?`: "${t.noteContent.length>30?t.noteContent.substring(0,30)+"...":t.noteContent}"`:"";return`${o} added note to ${d}${c}`}case"note_updated":{const d=a?a.replace("-"," #").replace("forming 1","forming"):"match",c=t.noteContent?`: "${t.noteContent.length>30?t.noteContent.substring(0,30)+"...":t.noteContent}"`:"";return`${o} updated note on ${d}${c}`}case"note_removed":{const d=a?a.replace("-"," #").replace("forming 1","forming"):"match";return`${o} removed note from ${d}`}case"user_login":return`${i} logged in`;default:return`${i} - ${n}`}}function vr(t){const n=new Set(ne.value);n.has(t)?n.delete(t):n.add(t),ne.value=n}function mr(){if(ne.value.size===0)return Ct.value;const t=new Set;return ne.value.forEach(n=>{Qi[n].actions.forEach(i=>t.add(i))}),Ct.value.filter(n=>t.has(n.action))}function yr(){Oe.value=!1,Ee.value=!1,ne.value=new Set}function xr(){j(()=>{Oe.value&&dr()},[Oe.value]);const t=mr(),n={};return Ee.value?t.forEach(i=>{n[i.date]||(n[i.date]=[]),n[i.date].push(i)}):t.forEach(i=>{const o=new Date(i.timestamp).toISOString().split("T")[0];n[o]||(n[o]=[]),n[o].push(i)}),e(be,{isOpen:Oe.value,onClose:yr,title:"Activity History",children:[e("div",{style:"display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px;",children:[Object.entries(Qi).map(([i,o])=>{const r=ne.value.has(i);return e("button",{onClick:()=>vr(i),style:{padding:"4px 10px",fontSize:"12px",border:r?"1px solid #4CAF50":"1px solid #ddd",borderRadius:"16px",background:r?"#E8F5E9":"#fff",color:r?"#2E7D32":"#666",cursor:"pointer",fontWeight:r?"500":"400"},children:o.label},i)}),ne.value.size>0&&e("button",{onClick:()=>{ne.value=new Set},style:{padding:"4px 10px",fontSize:"12px",border:"1px solid #f44336",borderRadius:"16px",background:"#fff",color:"#f44336",cursor:"pointer"},children:"Clear"})]}),e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;",children:[e("p",{style:"font-size: 13px; color: #666; margin: 0;",children:[Ee.value?"Grouped by play date":"Grouped by when changes were made",ne.value.size>0&&` (${t.length} filtered)`]}),e("label",{style:"font-size: 13px; color: #666; cursor: pointer; display: flex; align-items: center; gap: 4px;",children:[e("input",{type:"checkbox",checked:Ee.value,onChange:i=>{Ee.value=i.target.checked}}),"Group by Play Date"]})]}),e("div",{style:"max-height: 400px; overflow-y: auto;",children:Pn.value?e("p",{style:"color: #999; text-align: center; padding: 24px;",children:"Loading..."}):t.length===0?e("p",{style:"color: #999; text-align: center; padding: 24px;",children:ne.value.size>0?"No matching activities":"No activity recorded yet"}):Object.entries(n).sort(([i],[o])=>o.localeCompare(i)).map(([i,o])=>e("div",{children:[e("div",{style:"font-weight: bold; color: #666; margin-top: 12px; padding-bottom: 4px; border-bottom: 1px solid #ddd;",children:W(i)}),o.map((r,l)=>e("div",{style:"padding: 10px; background: #f9f9f9; border-radius: 6px; font-size: 14px; margin-top: 8px; position: relative;",children:e("div",{style:"display: flex; align-items: flex-start; gap: 6px;",children:[e("span",{children:fr(r.action)}),e("div",{style:"flex: 1;",children:[gr(r),e("div",{style:"font-size: 12px; color: #999; margin-top: 4px; display: flex; gap: 8px; flex-wrap: wrap;",children:[e("span",{children:hr(r.timestamp)}),Ee.value?e("span",{style:"color: #666;",children:["changed on ",W(new Date(r.timestamp).toISOString().split("T")[0])]}):e("span",{style:"color: #4CAF50;",children:["for ",W(r.date)]})]})]}),e("button",{onClick:()=>ur(r),title:"Remove this activity",style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:"#999",fontSize:"16px",lineHeight:"1",borderRadius:"4px",transition:"color 0.2s, background 0.2s"},onMouseOver:a=>{a.target.style.color="#f44336",a.target.style.background="#ffebee"},onMouseOut:a=>{a.target.style.color="#999",a.target.style.background="none"},children:e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})},l))]},i))})]})}const St=v(!1);async function br(t,n){try{const i=M(),o=new Date().toISOString().split("T")[0];await i.ref(`groups/${t}/activity/${o}`).push({timestamp:Date.now(),action:"user_login",player:n,by:n})}catch(i){console.error("Error logging login activity:",i)}}function _r(t){const n=t.target.value;if(!n)return;C.value=n;const i=S.value;i&&(localStorage.setItem(`sessionUser_${i}`,n),br(i,n)),se.value=n,Y.value=!0,St.value=!1,y(`Welcome, ${n}!`,"success")}function wr(){const t=[...T.value].sort((n,i)=>n.localeCompare(i));return e(be,{isOpen:St.value,title:"",showCloseButton:!1,children:e("div",{style:"text-align: center; padding: 10px 0;",children:[e("h2",{style:"margin-top: 0; font-size: 24px;",children:"Welcome!"}),e("p",{style:"color: #4CAF50; font-weight: 500; margin-bottom: 16px; font-size: 16px;",children:G.value}),e("p",{style:"color: #666; margin-bottom: 20px;",children:"Select your name to start"}),e("select",{onChange:_r,style:"width: 100%; padding: 12px; font-size: 16px; border: 2px solid #e0e0e0; border-radius: 8px;",children:[e("option",{value:"",children:"Select your name..."}),t.map(n=>e("option",{value:n,children:n},n))]})]})})}function hi(t){return t.toLowerCase().replace(/\s+/g,"")}function kr(t){const n=C.value;return n?(J.value[t]||[]).some(o=>o.name&&hi(o.name)===hi(n)):!0}function Cr(t){D.value=t,C.value&&!kr(t)?(se.value=C.value,Y.value=!0):(se.value="",Y.value=!1)}function Sr(){const t=po(null);j(()=>{const r=t.current;if(!r)return;const l=setTimeout(()=>{const a=r.querySelector('[data-today="true"]');a&&a.scrollIntoView({behavior:"instant",inline:"start",block:"nearest"})},50);return()=>clearTimeout(l)},[]);const n=[],i=new Date,o=Mn(i);for(let r=-14;r<=14;r++){const l=new Date(i);l.setDate(i.getDate()+r);const a=Mn(l),s=l.toLocaleDateString("en-US",{weekday:"short"}),d=l.getDate(),c=l.toLocaleDateString("en-US",{month:"short"}),p=(J.value[a]||[]).length,u=a===o,h=r<0;n.push({value:a,dayName:s,dayNum:d,monthName:c,isToday:u,isPast:h,checkinCount:p})}return e("div",{class:"date-selector",children:e("div",{class:"date-scroll",ref:t,children:n.map(r=>e("button",{class:`date-btn ${D.value===r.value?"selected":""} ${r.isPast?"past":""}`,onClick:()=>Cr(r.value),"data-date":r.value,"data-today":r.isToday?"true":void 0,children:[e("span",{class:"day-name",children:r.dayName}),e("span",{class:"day-num",children:r.dayNum}),e("span",{class:"month-name",children:r.monthName}),r.isToday&&e("span",{class:"today-badge",children:"Today"}),r.checkinCount>0&&e("span",{class:"checkin-badge",children:r.checkinCount})]},r.value))})})}function $r(){const t=a=>{const s=a.target.value;if(se.value=s,s==="__guest__")pe.value=!0,_e.value=!1,Y.value=!0;else if(s==="__new_member__")_e.value=!0,pe.value=!1,Y.value=!0;else if(s){if(pe.value=!1,_e.value=!1,Y.value=!0,!C.value){C.value=s;const d=S.value;d&&localStorage.setItem(`sessionUser_${d}`,s)}}else Y.value=!1},n=async()=>{let a=se.value,s="";if(pe.value){if(!nt.value.trim()){y("Please enter guest name","error");return}if(!lt.value){y("Please select who is adding the guest","error");return}a=nt.value.trim(),s=lt.value}if(!a||a==="__guest__"||a==="__new_member__"){y("Please select a name","error");return}await Ao({name:a,playStyle:ue.value,isGuest:pe.value,addedBy:pe.value?s:C.value,allowRotation:Bt.value,timeRange:we.value&&ke.value?{start:we.value,end:ke.value}:void 0}),r()},i=async()=>{if(!Pe.value.trim()){y("Please enter member name","error");return}if(!C.value){y("Please select your name first","error");return}const a=Pe.value.trim(),s=it.value.trim(),d=ot.value.trim();await Lo({name:a,phone:s,email:d,notes:rt.value.trim(),addedBy:C.value}),Pe.value="",it.value="",ot.value="",rt.value="",_e.value=!1,se.value="",Y.value=!1,(s||d)&&Ji(a,s,d)},o=()=>{r()},r=()=>{se.value="",pe.value=!1,_e.value=!1,nt.value="",Pe.value="",it.value="",ot.value="",rt.value="",lt.value="",ue.value="both",Bt.value=!0,we.value="",ke.value="",Y.value=!1},l=(a,s)=>{we.value=a,ke.value=s};return e(R,{children:[e("div",{class:"input-group",children:e("select",{id:"nameSelect",value:se.value,onChange:t,children:[e("option",{value:"",children:C.value?"Check-in another player...":"Select your name..."}),[...T.value].sort((a,s)=>a.localeCompare(s)).map(a=>e("option",{value:a,children:a},a)),e("option",{disabled:!0,children:"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"}),e("option",{value:"__guest__",children:"+ Add Guest"}),e("option",{value:"__new_member__",children:"+ Add New Member"})]})}),Y.value&&e("div",{class:"collapsible-form expanded",id:"checkInFormFields",children:[pe.value&&e("div",{class:"guest-form active",children:[e("input",{type:"text",placeholder:"Guest's name",value:nt.value,onInput:a=>{nt.value=a.target.value}}),e("select",{value:lt.value,onChange:a=>{lt.value=a.target.value},children:[e("option",{value:"",children:"Who is adding this guest?"}),[...T.value].sort((a,s)=>a.localeCompare(s)).map(a=>e("option",{value:a,children:a},a))]})]}),_e.value&&e("div",{class:"member-form",children:[e("h3",{style:"font-size: 14px; margin-bottom: 12px; color: #333;",children:"Add New Member"}),e("input",{type:"text",placeholder:"Member's full name",value:Pe.value,onInput:a=>{Pe.value=a.target.value},style:"margin-bottom: 8px;"}),e("div",{style:"display: flex; gap: 8px; margin-bottom: 8px;",children:[e("input",{type:"tel",placeholder:"Phone (optional)",value:it.value,onInput:a=>{it.value=a.target.value},style:"flex: 1;"}),e("input",{type:"email",placeholder:"Email (optional)",value:ot.value,onInput:a=>{ot.value=a.target.value},style:"flex: 1;"})]}),e("textarea",{placeholder:"Notes (skill level, how you know them, etc.) - optional",rows:3,value:rt.value,onInput:a=>{rt.value=a.target.value},style:"width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px; font-family: inherit; font-size: 14px; resize: vertical; margin-bottom: 12px;"}),e("div",{style:"font-size: 12px; color: #666; margin-bottom: 12px;",children:["Added by: ",e("strong",{children:C.value||"(select your name first)"})]}),e("div",{style:"display: flex; gap: 8px;",children:[e("button",{onClick:o,style:"flex: 1; background: #ccc; color: #333;",children:"Cancel"}),e("button",{onClick:i,style:"flex: 2; background: #4CAF50; color: white;",children:"Add Member"})]})]}),!_e.value&&e(R,{children:[e("div",{class:"preference-group",children:[e("button",{class:`preference-btn singles ${ue.value==="singles"?"selected":""}`,onClick:()=>{ue.value="singles"},children:"Singles Only"}),e("button",{class:`preference-btn ${ue.value==="both"?"selected":""}`,onClick:()=>{ue.value="both"},children:"Either"}),e("button",{class:`preference-btn doubles ${ue.value==="doubles"?"selected":""}`,onClick:()=>{ue.value="doubles"},children:"Doubles Only"})]}),e("div",{class:"time-slots",children:[e("h3",{children:"Available Time (optional)"}),e("div",{style:"display: flex; gap: 6px; margin-bottom: 12px; flex-wrap: wrap;",children:[e("button",{class:"time-preset-btn",onClick:()=>l("08:00","12:00"),children:["Morning",e("br",{}),e("small",{children:"8am-12pm"})]}),e("button",{class:"time-preset-btn",onClick:()=>l("12:00","15:00"),children:["Midday",e("br",{}),e("small",{children:"12-3pm"})]}),e("button",{class:"time-preset-btn",onClick:()=>l("15:00","18:00"),children:["Afternoon",e("br",{}),e("small",{children:"3-6pm"})]}),e("button",{class:"time-preset-btn",onClick:()=>l("18:00","21:00"),children:["Evening",e("br",{}),e("small",{children:"6-9pm"})]})]}),e("div",{style:"display: flex; gap: 8px; align-items: center; flex-wrap: wrap;",children:[e("input",{type:"time",value:we.value,onInput:a=>{we.value=a.target.value},style:"flex: 1; min-width: 120px; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;"}),e("span",{style:"color: #666;",children:"to"}),e("input",{type:"time",value:ke.value,onInput:a=>{ke.value=a.target.value},style:"flex: 1; min-width: 120px; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;"}),e("button",{onClick:()=>{we.value="",ke.value=""},style:"padding: 10px 12px; background: #f5f5f5; color: #666; font-size: 13px;",children:"Clear"})]})]}),e("div",{class:"rotation-option",style:"margin-bottom: 16px; padding: 12px; background: #f9f9f9; border-radius: 8px;",children:[e("label",{style:"display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 14px;",children:[e("input",{type:"checkbox",checked:Bt.value,onChange:a=>{Bt.value=a.target.checked},style:"width: 18px; height: 18px; cursor: pointer; margin-right: 4px;"}),e("span",{children:"Willing to play 3-player rotation (1v1 or 1v2 format)"})]}),e("div",{style:"font-size: 12px; color: #666; margin-top: 4px; margin-left: 26px;",children:"If unchecked, you'll only be placed in doubles or singles matches"})]}),e("div",{style:"display: flex; gap: 10px; margin-top: 16px;",children:[e("button",{onClick:o,style:"flex: 1; background: #f5f5f5; color: #666;",children:"Cancel"}),e("button",{onClick:n,style:"flex: 2; background: #4CAF50; color: white;",children:"Check In"})]})]})]})]})}function me(t){return t.toLowerCase().replace(/\s+/g,"")}function zr(t){switch(t){case"singles":return"Singles";case"doubles":return"Doubles";default:return"Either"}}const Kn=v(!1),qe=v(null),ge=v("both"),$t=v(""),zt=v(""),Xt=v(!0),Yn=v(!1),en=v(null),ve=v(""),ae=v(!1),Ue=v("confirm"),K=v(""),qn=v("");function Ir(t){const n=Ro(t,C.value);n&&(en.value=t,ve.value=n.personName,ae.value=n.isOwner,Ue.value="confirm",K.value=D.value,qn.value=G.value,Yn.value=!0)}function gn(){Yn.value=!1,en.value=null,ve.value="",ae.value=!1,Ue.value="confirm",K.value="",qn.value=""}async function Ar(){const t=en.value;t!==null&&(en.value=null,await Do(t,C.value),Ue.value="done")}function Mr(t){const n=dn.value[t];n&&(qe.value=t,ge.value=n.playStyle||"both",$t.value=n.timeRange?.start||"",zt.value=n.timeRange?.end||"",Xt.value=n.allowRotation!==!1,Kn.value=!0)}function Zi(){Kn.value=!1,qe.value=null}async function Rr(){if(qe.value===null)return;const t={playStyle:ge.value,allowRotation:Xt.value};($t.value||zt.value)&&(t.timeRange={start:$t.value,end:zt.value}),await Mo(qe.value,t,C.value),Zi()}function Dr(t){const n=S.value,i=t.name||"",o=C.value&&me(C.value)===me(i),r=t.addedBy&&C.value&&me(C.value)===me(t.addedBy),l=n&&sessionStorage.getItem(`adminAuth_${n}`)==="true";return!!(o||r||l)}function Pr(){const t=dn.value,n=qe.value!==null?t[qe.value]:null,i=e(R,{children:[e(be,{isOpen:Kn.value,onClose:Zi,title:`Edit ${n?.name||""}'s Preferences`,children:e("div",{style:"display: flex; flex-direction: column; gap: 16px;",children:[e("div",{children:[e("label",{style:"display: block; font-weight: 500; margin-bottom: 8px;",children:"Play Style"}),e("div",{style:"display: flex; gap: 8px;",children:["singles","doubles","both"].map(o=>e("button",{onClick:()=>{ge.value=o},style:{flex:1,padding:"10px",border:ge.value===o?"2px solid #4CAF50":"2px solid #e0e0e0",borderRadius:"8px",background:ge.value===o?"#E8F5E9":"#fff",color:ge.value===o?"#2E7D32":"#666",cursor:"pointer",fontWeight:ge.value===o?"600":"400"},children:o==="singles"?"Singles":o==="doubles"?"Doubles":"Either"},o))})]}),e("div",{children:[e("label",{style:"display: block; font-weight: 500; margin-bottom: 8px;",children:"Available Time (optional)"}),e("div",{style:"display: flex; gap: 8px; align-items: center;",children:[e("input",{type:"time",value:$t.value,onInput:o=>{$t.value=o.target.value},style:"flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 6px;"}),e("span",{children:"to"}),e("input",{type:"time",value:zt.value,onInput:o=>{zt.value=o.target.value},style:"flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 6px;"})]})]}),ge.value==="singles"&&e("div",{children:[e("label",{style:"display: flex; align-items: center; gap: 8px; cursor: pointer;",children:[e("input",{type:"checkbox",checked:Xt.value,onChange:o=>{Xt.value=o.target.checked}}),e("span",{children:"Open to 3-player rotation"})]}),e("p",{style:"font-size: 12px; color: #666; margin: 4px 0 0 24px;",children:"If unchecked, you'll only be matched for 2-player singles"})]}),e("button",{onClick:Rr,style:{padding:"12px",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"8px"},children:"Save Changes"})]})}),e(be,{isOpen:Yn.value,onClose:gn,title:Ue.value==="done"?"":ae.value?"Remove Your Check-in?":`Remove ${ve.value}?`,showCloseButton:Ue.value!=="done",children:e("div",{style:"display: flex; flex-direction: column; gap: 16px;",children:Ue.value==="confirm"?e(R,{children:[ae.value?e(R,{children:[e("p",{style:"color: #666; margin: 0; line-height: 1.5;",children:"Are you sure you want to remove yourself from this date?"}),e("div",{style:"background: #FFF8E1; border-radius: 8px; padding: 12px; border-left: 4px solid #FFB74D;",children:[e("p",{style:"margin: 0 0 8px 0; font-weight: 500; color: #E65100;",children:"Things to consider:"}),e("ul",{style:"margin: 0; padding-left: 20px; color: #666; font-size: 14px;",children:[e("li",{children:"You'll lose your current spot in the check-in order"}),e("li",{children:["If you want to change your preferences, you can ",e("strong",{children:"edit"})," instead"]}),e("li",{children:"You can always check in again after removing"})]})]})]}):e(R,{children:[e("p",{style:"color: #666; margin: 0; line-height: 1.5;",children:["Are you sure you want to remove ",e("strong",{children:ve.value})," from this date?"]}),e("div",{style:"background: #FFF8E1; border-radius: 8px; padding: 12px; border-left: 4px solid #FFB74D;",children:e("p",{style:"margin: 0; color: #666; font-size: 14px;",children:["They will lose their spot in the check-in order. Consider using ",e("strong",{children:"edit"})," to update their preferences instead."]})})]}),e("div",{style:"display: flex; gap: 12px; margin-top: 8px;",children:[e("button",{onClick:gn,style:{flex:1,padding:"12px",background:"#f5f5f5",color:"#666",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:Ar,style:{flex:1,padding:"12px",background:"#ef5350",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Yes, Remove"})]})]}):e(R,{children:[e("div",{style:"text-align: center; padding: 8px 0;",children:[e("div",{style:"font-size: 48px; margin-bottom: 8px;",children:"âœ“"}),e("p",{style:"color: #666; margin: 0;",children:ae.value?`You've been removed from ${W(K.value)}`:`${ve.value} has been removed from ${W(K.value)}`})]}),e("div",{children:[e("p",{style:"margin: 0 0 8px 0; font-size: 13px; color: #666; text-align: center;",children:"Let others know:"}),e("div",{style:"display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;",children:[e("a",{href:`https://wa.me/?text=${encodeURIComponent(ae.value?`I'm out on ${W(K.value)}.`:`Hi ${ve.value}, I removed you from ${W(K.value)}. Let me know if you have questions!`)}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"4px",padding:"8px 16px",background:"#25D366",color:"white",borderRadius:"6px",fontSize:"14px",textDecoration:"none"},children:"WhatsApp"}),e("a",{href:`sms:?body=${encodeURIComponent(ae.value?`I'm out on ${W(K.value)}.`:`Hi ${ve.value}, I removed you from ${W(K.value)}. Let me know if you have questions!`)}`,style:{display:"flex",alignItems:"center",gap:"4px",padding:"8px 16px",background:"#007AFF",color:"white",borderRadius:"6px",fontSize:"14px",textDecoration:"none"},children:"Text"}),e("a",{href:`mailto:?subject=${encodeURIComponent(ae.value?`I'm Out on ${W(K.value)}`:`${qn.value} - Check-in Removed`)}&body=${encodeURIComponent(ae.value?`I'm out on ${W(K.value)}.`:`Hi ${ve.value},

I removed you from ${W(K.value)}.

Let me know if you have questions!`)}`,style:{display:"flex",alignItems:"center",gap:"4px",padding:"8px 16px",background:"#EA4335",color:"white",borderRadius:"6px",fontSize:"14px",textDecoration:"none"},children:"Email"})]})]}),e("button",{onClick:gn,style:{width:"100%",padding:"12px",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"8px"},children:"Done"})]})})})]});return t.length===0?e(R,{children:[e("div",{class:"empty-state",children:"No check-ins yet"}),i]}):e(R,{children:[e("div",{id:"checkinList",children:t.map((o,r)=>{const l=C.value&&me(o.name)===me(C.value),a=l?"checkin-item current-user":"checkin-item",s=Dr(o);let d="";o.isGuest?d=`guest of ${o.addedBy}`:o.addedBy&&me(o.addedBy)!==me(o.name)&&(d=`added by ${o.addedBy}`);const c=o.timeRange?ee(o.timeRange.start,o.timeRange.end):"";return e("div",{class:a,children:[e("span",{children:[e("span",{class:"checkin-name",children:[r+1,". ",o.name,l&&e("span",{class:"current-user-badge",children:"YOU"}),d&&e("span",{class:"guest-indicator",children:[" ",d]}),c&&e("span",{class:"time-badge",children:c}),o.allowRotation===!1&&e("span",{class:"time-badge",style:"background: #fff3e0; color: #e65100;",children:"No 3s"})]}),e("span",{class:`preference-badge ${o.playStyle||"both"}`,children:zr(o.playStyle||"both")}),e("span",{class:"checkin-time",children:Ki(o.timestamp)})]}),s&&e("div",{style:"display: flex; gap: 4px;",children:[e("button",{class:"edit-btn",onClick:()=>Mr(r),title:"Edit preferences",style:{background:"rgba(76, 175, 80, 0.1)",color:"#4CAF50",border:"none",borderRadius:"50%",padding:"0",width:"28px",height:"28px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"âœï¸"}),e("button",{class:"remove-btn",onClick:()=>Ir(r),title:"Remove check-in",style:{background:"rgba(255, 82, 82, 0.1)",color:"#e57373",border:"none",borderRadius:"50%",padding:"0",width:"28px",height:"28px",fontSize:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"Ã—"})]})]},r)})}),i]})}function fi(t,n){return n[An(t)]||{include:[],exclude:[]}}function Fr(t,n,i){const o=fi(t,i),r=fi(n,i),l=An(t),a=An(n);return!o.exclude.includes(a)&&!r.exclude.includes(l)}function Nr(t,n){if(!t||!n||!t.start&&!t.end&&!n.start&&!n.end)return!0;const i=h=>{if(!h)return null;const[g,x]=h.split(":").map(Number);return g*60+x},o=i(t.start),r=i(t.end),l=i(n.start),a=i(n.end),s=360,d=1260,c=o??s,f=r??d,p=l??s;return c<(a??d)&&p<f}function tt(t,n,i){return Fr(t.name,n.name,i)?Nr(t.timeRange,n.timeRange):!1}function Jn(t,n={}){const i=[],o=[];let r=t.map((u,h)=>({...u,originalIndex:h}));r.sort((u,h)=>u.timestamp-h.timestamp);const l=r.filter(u=>u.playStyle==="doubles"),a=r.filter(u=>u.playStyle==="singles"),s=r.filter(u=>u.playStyle==="both"||!u.playStyle);let d=[...l,...s].sort((u,h)=>u.timestamp-h.timestamp);for(;d.length>=4;){const u=d.slice(0,4);i.push({type:"doubles",number:i.filter(h=>h.type==="doubles").length+1,players:u}),d.splice(0,4)}let c=[...a].sort((u,h)=>u.timestamp-h.timestamp);for(;c.length>=2;){let u=null;for(let h=0;h<c.length-1;h++){for(let g=h+1;g<c.length;g++)if(tt(c[h],c[g],n)){u=[c[h],c[g]];break}if(u)break}if(u)i.push({type:"singles",players:u}),u.forEach(h=>{const g=c.findIndex(x=>x.originalIndex===h.originalIndex);g>-1&&c.splice(g,1)});else break}const f=d,p=c;if(f.length>0){const u=4-f.length,h=f.filter(w=>w.playStyle==="both"||!w.playStyle),g=h.length,x=f.every(w=>w.playStyle==="both"||!w.playStyle),m=f.every(w=>w.allowRotation!==!1),b=f.length===3&&tt(f[0],f[1],n)&&tt(f[0],f[2],n)&&tt(f[1],f[2],n);let _=!1;g>=2&&(_=tt(h[0],h[1],n)),i.push({type:"doubles-forming",players:f,needed:u,canRotate:f.length===3&&x&&m&&b,eitherCount:g,canPlaySingles:_})}return p.length>0&&p.forEach(u=>{i.push({type:"singles-forming",players:[u],needed:1})}),{matches:i,warnings:o}}const st=v({}),Nt=v(null),vn=v(!1);function Xi(t){return{0:"â˜€ï¸ Clear sky",1:"ðŸŒ¤ï¸ Mainly clear",2:"â›… Partly cloudy",3:"â˜ï¸ Overcast",45:"ðŸŒ«ï¸ Foggy",48:"ðŸŒ«ï¸ Foggy",51:"ðŸŒ¦ï¸ Light drizzle",53:"ðŸŒ¦ï¸ Drizzle",55:"ðŸŒ§ï¸ Heavy drizzle",61:"ðŸŒ§ï¸ Light rain",63:"ðŸŒ§ï¸ Rain",65:"ðŸŒ§ï¸ Heavy rain",71:"ðŸŒ¨ï¸ Light snow",73:"ðŸŒ¨ï¸ Snow",75:"ðŸŒ¨ï¸ Heavy snow",77:"ðŸŒ¨ï¸ Snow grains",80:"ðŸŒ¦ï¸ Rain showers",81:"ðŸŒ§ï¸ Rain showers",82:"â›ˆï¸ Heavy rain showers",85:"ðŸŒ¨ï¸ Snow showers",86:"ðŸŒ¨ï¸ Heavy snow showers",95:"â›ˆï¸ Thunderstorm",96:"â›ˆï¸ Thunderstorm with hail",99:"â›ˆï¸ Severe thunderstorm"}[t]||"ðŸŒ¡ï¸ Weather"}async function Er(t,n,i){const o=`${t},${n},${i}`;if(st.value[o])return st.value[o];try{const r=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${n}&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,weathercode&temperature_unit=fahrenheit&timezone=America/Los_Angeles&forecast_days=14`,l=await fetch(r);if(!l.ok)throw new Error("Weather API error");const a=await l.json();if(!a.daily||!a.daily.time||!Array.isArray(a.daily.time))throw new Error("Invalid weather data format");const s=a.daily.time.indexOf(i);if(s===-1)throw new Error("Weather data not available for this date");const d={tempMax:Math.round(a.daily.temperature_2m_max[s]),tempMin:Math.round(a.daily.temperature_2m_min[s]),precipProb:a.daily.precipitation_probability_max[s]||0,weatherCode:a.daily.weathercode[s]};return st.value={...st.value,[o]:d},d}catch(r){console.error("Weather fetch error:",r)}return null}function Tr(){if(j(()=>{const i=de(()=>{const o=D.value,r=N.value.location;if(!o)return;const l=new Date;l.setHours(0,0,0,0);const a=new Date(o+"T00:00:00"),s=Math.floor((a.getTime()-l.getTime())/(1e3*60*60*24));if(s<0||s>=14){Nt.value=null;return}const d=r?.lat??37.2358,c=r?.lon??-121.9623;vn.value=!0,Er(d,c,o).then(f=>{Nt.value=f,vn.value=!1})});return()=>i()},[]),vn.value)return e("div",{id:"weatherWidget",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 14px",background:"linear-gradient(135deg, #e3f2fd 0%, #f0f4ff 100%)",borderRadius:"10px",marginBottom:"16px",fontSize:"13px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",color:"#666"},children:"Loading weather..."});if(!Nt.value)return null;const t=Nt.value,n=N.value.location?.name||"Los Gatos, CA";return e("div",{id:"weatherWidget",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(135deg, #e3f2fd 0%, #f0f4ff 100%)",borderRadius:"10px",marginBottom:"16px",fontSize:"13px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontWeight:600,color:"#1976d2"},children:n}),e("span",{style:{color:"#666"},children:"â€¢"}),e("span",{style:{color:"#666"},children:Xi(t.weatherCode)})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e("span",{style:{fontWeight:600,color:"#333"},children:[t.tempMin,"Â°-",t.tempMax,"Â°F"]}),t.precipProb>0&&e("span",{style:{color:"#1976d2"},children:["ðŸ’§",t.precipProb,"%"]})]})]})}const It=v(null);typeof document<"u"&&document.addEventListener("click",t=>{if(It.value){const n=t.target;!n.closest(".share-dropdown")&&!n.closest("[data-share-button]")&&(It.value=null)}});function Lr(t,n){const o=new Date(n+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),r=t.players.map(s=>s.name).join(" & "),l=S.value,a=`${window.location.origin}${window.location.pathname}#${l}`;if(t.type==="doubles-forming"){const s=t.needed||4-t.players.length;let c=`ðŸŽ¾ ${s===1?"1 more player needed":`${s} more players needed`} for doubles!
`;return c+=`ðŸ“… ${o}
`,c+=`ðŸ‘¥ ${r} ${t.players.length===1?"is":"are"} in

`,c+=`Can you make it? ${a}`,c}else if(t.type==="singles-forming"){const s=t.players[0];let d=`ðŸŽ¾ 1 more player needed for singles!
`;return d+=`ðŸ“… ${o}
`,d+=`ðŸ‘¤ ${s.name} is in`,s.timeRange&&(d+=` (${ee(s.timeRange.start,s.timeRange.end)})`),d+=`

Can you make it? ${a}`,d}return""}function mn(t,n,i){const o=Lr(t,n);if(i==="whatsapp"){const r=encodeURIComponent(o);window.open(`https://wa.me/?text=${r}`,"_blank")}else if(i==="sms"){const r=encodeURIComponent(o);window.open(`sms:?body=${r}`,"_blank")}else i==="copy"&&navigator.clipboard.writeText(o).then(()=>{y("Message copied!","success")}).catch(()=>{y("Failed to copy","error")});It.value=null}function gi({match:t,matchKey:n,needed:i}){const o=D.value||"",r=It.value===n;return e("div",{style:"position: relative; display: inline-block;",children:[e("button",{"data-share-button":!0,onClick:l=>{l.stopPropagation(),It.value=r?null:n},style:{background:r?"#e65100":"#ff9800",border:"none",borderRadius:"16px",padding:"6px 14px",fontSize:"13px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"white",transition:"all 0.2s",boxShadow:"0 2px 6px rgba(255, 152, 0, 0.4)"},children:[e("span",{children:"Invite"}),e("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",style:{transform:r?"rotate(180deg)":"none",transition:"transform 0.2s"},children:e("path",{d:"M7 10l5 5 5-5z"})})]}),r&&e("div",{class:"share-dropdown",style:{position:"absolute",top:"100%",right:"0",marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,overflow:"hidden",minWidth:"140px"},children:[e("button",{onClick:()=>mn(t,o,"whatsapp"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#25D366"},children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),e("button",{onClick:()=>mn(t,o,"sms"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#2196F3",borderTop:"1px solid #f0f0f0"},children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),"SMS"]}),e("button",{onClick:()=>mn(t,o,"copy"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#666",borderTop:"1px solid #f0f0f0"},children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),"Copy"]})]})]})}function Br(t){switch(t){case"singles":return"Singles";case"doubles":return"Doubles";default:return"Either"}}const jr=So((...t)=>{const[n,i]=t;To(n,i)},500);function Et({matchKey:t}){const n=V.value[t]||"";return e("div",{class:"match-notes",children:e("input",{type:"text",placeholder:"ðŸ“ Add note (court, time, etc.)",value:n,onInput:i=>{const o=i.target.value;jr(t,o)},class:"match-note-input"})})}function De({players:t}){return e("ul",{children:t.map((n,i)=>{const o=n.isGuest?` (guest of ${n.addedBy})`:"",r=n.timeRange?` ${ee(n.timeRange.start,n.timeRange.end)}`:"";return e("li",{children:["â€¢ ",n.name,o&&e("span",{class:"guest-indicator",children:o}),r&&e("span",{class:"time-badge",children:r}),e("span",{class:`preference-badge ${n.playStyle||"both"}`,children:Br(n.playStyle||"both")})]},i)})})}function Or(t,n,i){let l=`${new Date(i+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}
`,a=0,s=0;t.forEach(g=>{if(g.type==="doubles"){const x=g.players.map(_=>_.name);l+=`Doubles: ${x.join(", ")}
`;const m=g.players.filter(_=>_.timeRange).map(_=>ee(_.timeRange.start,_.timeRange.end));m.length>0&&(l+=`${m[0]}
`);const b=`doubles-${g.number}`;V.value[b]&&(l+=`ðŸ“ ${V.value[b]}
`),l+=`
`}else if(g.type==="singles"){a++;const x=g.players.map(k=>k.name);l+=`Singles: ${x.join(", ")}
`;const m=g.players.every(k=>(k.playStyle||"both")==="both"),b=g.players.some(k=>k.allowRotation===!0);m&&b&&(l+=`Open to more players
`);const _=g.players.filter(k=>k.timeRange).map(k=>ee(k.timeRange.start,k.timeRange.end));_.length>0&&(l+=`${_[0]}
`);const w=`singles-${a}`;V.value[w]&&(l+=`ðŸ“ ${V.value[w]}
`),l+=`
`}else if(g.type==="singles-or-practice"){s++,l+=`Rotation: ${g.players.map(b=>b.name).join(", ")}
`;const x=g.players.filter(b=>b.timeRange).map(b=>ee(b.timeRange.start,b.timeRange.end));x.length>0&&(l+=`${x[0]}
`);const m=`rotation-${s}`;V.value[m]&&(l+=`ðŸ“ ${V.value[m]}
`),l+=`
`}else if(g.type==="doubles-forming"){const x=g.players.map(w=>w.name),m=g.needed===1?"need 1 more":`need ${g.needed} more`;l+=`Doubles (forming): ${x.join(", ")}
`,l+=`${m}
`,g.canRotate?l+=`Can rotate if no 4th
`:g.canPlaySingles&&(g.eitherCount||0)>=2?l+=`Will play singles if no more join
`:(g.eitherCount||0)===1&&g.players.length===1&&(l+=`Can play singles if 1 more joins
`);const b=g.players.filter(w=>w.timeRange).map(w=>ee(w.timeRange.start,w.timeRange.end));b.length>0&&(l+=`${b[0]}
`);const _="doubles-forming-1";V.value[_]&&(l+=`ðŸ“ ${V.value[_]}
`),l+=`
`}else if(g.type==="singles-forming"){const x=g.players[0];l+=`Singles (forming): ${x.name}
`,l+=`need 1 more
`,x.timeRange&&(l+=`${ee(x.timeRange.start,x.timeRange.end)}
`),l+=`
`}});const d=t.filter(g=>g.type==="waiting");if(d.length>0){const g=d.flatMap(x=>x.players.map(m=>m.name));g.length>0&&(l+=`Standby: ${g.join(", ")}
`)}const c=N.value.location,f=c?.lat??37.2358,p=c?.lon??-121.9623,u=`${f},${p},${i}`,h=st.value[u];if(h){const g=Xi(h.weatherCode);l+=`${g}, ${h.tempMax}Â°F`}return l.trim()}function Wr(t,n,i){const o=Or(t,n,i),r=encodeURIComponent(o);window.open(`https://wa.me/?text=${r}`,"_blank")}function Hr(){const t=D.value;t&&confirm(`Are you sure you want to reset all check-ins for ${W(t)}?

This cannot be undone.`)&&Eo()}function Gr(){const t=dn.value,n=D.value||"";if(t.length===0)return null;const{matches:i,warnings:o}=Jn(t),r=i.some(c=>c.type!=="waiting"||c.players.length>0);if(!r&&o.length===0)return null;const l=S.value,a=l&&sessionStorage.getItem(`adminAuth_${l}`)==="true";let s=0,d=0;return e("div",{class:"matches",id:"matches",style:"margin-top: 24px; padding-top: 24px; border-top: 2px solid #f0f0f0;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;",children:[e("h2",{style:"margin: 0;",children:"Games"}),e("div",{style:"display: flex; gap: 8px; align-items: center;",children:[r&&e("button",{onClick:()=>Wr(i,t,n),title:"Share to WhatsApp",style:{background:"#25D366",color:"white",border:"none",borderRadius:"50%",padding:"0",width:"36px",height:"36px",fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),a&&t.length>0&&e("button",{class:"reset-day-btn",onClick:Hr,title:"Reset This Day",style:{background:"rgba(255, 82, 82, 0.1)",color:"#e57373",border:"none",borderRadius:"50%",padding:"0",width:"36px",height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),o.length>0&&e("div",{class:"warning-box",children:o.map((c,f)=>e("div",{children:c},f))}),i.map((c,f)=>{if(c.type==="doubles"){const p=`doubles-${c.number}`;return e("div",{class:"match-group",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;",children:[e("h3",{style:"margin: 0;",children:["Doubles ",c.number]}),e("span",{style:"display: flex; align-items: center; gap: 4px; color: #4CAF50; font-size: 13px; font-weight: 600;",children:[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Ready"]})]}),e(De,{players:c.players}),e(Et,{matchKey:p})]},f)}if(c.type==="singles"){s++;const p=`singles-${s}`,u=c.players.every(x=>(x.playStyle||"both")==="both"),h=c.players.some(x=>x.allowRotation===!0),g=u&&h;return e("div",{class:"match-group singles-group",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;",children:[e("h3",{style:"margin: 0;",children:["Singles",s>1?` ${s}`:""]}),e("span",{style:"display: flex; align-items: center; gap: 4px; color: #4CAF50; font-size: 13px; font-weight: 600;",children:[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Ready"]})]}),e(De,{players:c.players}),g&&e("p",{style:"color: #666; font-size: 13px; margin: 8px 0 4px 0; font-style: italic;",children:"Open to more players"}),e(Et,{matchKey:p})]},f)}if(c.type==="singles-or-practice"){d++;const p=`rotation-${d}`;return e("div",{class:"match-group singles-group",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;",children:[e("h3",{style:"margin: 0;",children:"Rotation (3 players) - 1v1 or 1v2"}),e("span",{style:"display: flex; align-items: center; gap: 4px; color: #4CAF50; font-size: 13px; font-weight: 600;",children:[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Ready"]})]}),e(De,{players:c.players}),e(Et,{matchKey:p})]},f)}if(c.type==="doubles-forming"){const p="doubles-forming-1",u=c.needed||4-c.players.length;let h="";return c.canRotate?h="Can rotate if no 4th":c.canPlaySingles&&(c.eitherCount||0)>=2?h="Will play singles if no more join":(c.eitherCount||0)===1&&c.players.length===1&&(h="Can play singles if 1 more joins"),e("div",{class:"match-group forming-group",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px;",children:[e("h3",{style:"margin: 0;",children:"Doubles"}),e("span",{style:"display: flex; align-items: center; gap: 4px; color: #F57C00; font-size: 12px; font-weight: 600;",children:[e("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",children:e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),"Need ",u]})]}),e(gi,{match:c,matchKey:p,needed:u})]}),e(De,{players:c.players}),h&&e("p",{style:"color: #666; font-size: 13px; margin: 8px 0 4px 0; font-style: italic;",children:h}),e(Et,{matchKey:p})]},f)}return c.type==="singles-forming"?e("div",{class:"match-group forming-group",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px;",children:[e("h3",{style:"margin: 0;",children:"Singles"}),e("span",{style:"display: flex; align-items: center; gap: 4px; color: #F57C00; font-size: 12px; font-weight: 600;",children:[e("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",children:e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),"Need 1"]})]}),e(gi,{match:c,matchKey:"singles-forming-1",needed:1})]}),e(De,{players:c.players})]},f):c.type==="waiting"?e("div",{class:"match-group waiting-group",children:[e("h3",{children:"Waiting for Match"}),e(De,{players:c.players})]},f):null})]})}function Ur(){return e("div",{children:[e(Sr,{}),e(Tr,{}),e($r,{}),e(Gr,{}),e("div",{class:"checkins",style:"margin-top: 24px; padding-top: 24px; border-top: 2px solid #f0f0f0;",children:[e("h2",{onClick:()=>{jt.value=!jt.value},style:"cursor: pointer; display: flex; align-items: center; gap: 8px;",children:[e("span",{children:jt.value?"â–¼":"â–¶"}),e("span",{children:["Check-ins (",e("span",{children:dn.value.length}),")"]})]}),jt.value&&e(Pr,{})]})]})}const At=v(null),fe=v(null),tn=v(!1),Je=v(new Set),pt=v(!1);function Vr(){const t=S.value;return t?sessionStorage.getItem(`adminAuth_${t}`)==="true":!1}typeof document<"u"&&document.addEventListener("click",t=>{if(At.value){const n=t.target;!n.closest(".share-dropdown")&&!n.closest("[data-share-button]")&&(At.value=null)}});function ht(t){return t.toLowerCase().replace(/\s+/g,"")}const Kr=Ke(()=>{const t=fe.value||C.value;if(!t)return[];const n=ht(t),i=[],o=new Date;o.setHours(0,0,0,0);const r=Object.keys(J.value).sort();for(const l of r){if(new Date(l+"T00:00:00")<o)continue;const s=J.value[l]||[];if(s.length===0)continue;const d={},c=L.value||{};for(const[p,u]of Object.entries(c))u&&typeof u=="object"&&(d[ht(p)]={include:u.include||[],exclude:u.exclude||[]});const f=Jn(s,d);for(const p of f.matches)if(p.players.map(h=>ht(h.name)).includes(n)){const h=p.type==="doubles-forming"||p.type==="singles-forming";i.push({date:l,type:p.type,matchNumber:p.number||1,players:p.players.map(g=>({name:g.name,timeRange:g.timeRange})),isForming:h,needed:p.needed})}}return i});function Fn(t){switch(t){case"doubles":case"doubles-forming":return"Doubles";case"singles":case"singles-forming":return"Singles";case"rotation":case"singles-or-practice":return"Rotation";default:return t}}function Yr(t){const i=new Date(t.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),o=t.players.map(a=>a.name).join(" & "),r=S.value,l=`${window.location.origin}${window.location.pathname}#${r}`;if(t.type==="doubles-forming"){const a=t.needed||4-t.players.length;let d=`ðŸŽ¾ ${a===1?"1 more player needed":`${a} more players needed`} for doubles!
`;return d+=`ðŸ“… ${i}
`,d+=`ðŸ‘¥ ${o} ${t.players.length===1?"is":"are"} in

`,d+=`Can you make it? ${l}`,d}else if(t.type==="singles-forming"){const a=t.players[0];let s=`ðŸŽ¾ 1 more player needed for singles!
`;return s+=`ðŸ“… ${i}
`,s+=`ðŸ‘¤ ${a.name} is in`,a.timeRange&&(s+=` (${ee(a.timeRange.start,a.timeRange.end)})`),s+=`

Can you make it? ${l}`,s}return""}function yn(t,n){const i=Yr(t);if(n==="whatsapp"){const o=encodeURIComponent(i);window.open(`https://wa.me/?text=${o}`,"_blank")}else if(n==="sms"){const o=encodeURIComponent(i);window.open(`sms:?body=${o}`,"_blank")}else n==="copy"&&navigator.clipboard.writeText(i).then(()=>{y("Message copied!","success")}).catch(()=>{y("Failed to copy","error")});At.value=null}function vi(t){tn.value||(D.value=t,te.value="checkin")}function qr(t){const n=new Set(Je.value);n.has(t)?n.delete(t):n.add(t),Je.value=n}function Jr(){tn.value=!1,Je.value=new Set,pt.value=!1}function Qr(t,n){const i=S.value,o=`${window.location.origin}${window.location.pathname}#${i}`,r=t.filter((d,c)=>{const f=`mygames-${d.date}-${d.type}-${c}`;return n.has(f)});if(r.length===0)return"";const l=r.filter(d=>!d.isForming),a=r.filter(d=>d.isForming);let s=`ðŸŽ¾ Tennis Update

`;if(l.length>0){s+=`âœ… Ready to Play:
`;for(const d of l){const f=new Date(d.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),p=Fn(d.type),u=d.players.map(h=>h.name).join(", ");s+=`â€¢ ${f} - ${p}
  ${u}
`}s+=`
`}if(a.length>0){s+=`ðŸŸ¡ Need Players:
`;for(const d of a){const f=new Date(d.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),p=Fn(d.type),u=d.needed||1,h=d.players.map(g=>g.name).join(", ");s+=`â€¢ ${f} - ${p} needs ${u}
  ${h}
`}s+=`
`}return s+=`Check in: ${o}`,s}function Tt(t,n){const i=Qr(n,Je.value);if(!i){y("No games selected","error");return}if(t==="native"&&navigator.share)navigator.share({title:"Tennis Update",text:i}).catch(()=>{navigator.clipboard.writeText(i).then(()=>{y("Copied to clipboard","success")})});else if(t==="whatsapp"){const o=encodeURIComponent(i);window.open(`https://wa.me/?text=${o}`,"_blank")}else if(t==="sms"){const o=encodeURIComponent(i);window.open(`sms:?body=${o}`,"_blank")}else navigator.clipboard.writeText(i).then(()=>{y("Copied to clipboard","success")}).catch(()=>{y("Failed to copy","error")});pt.value=!1}function Zr(){const t=Kr.value,n=Vr(),i=fe.value||C.value,o=fe.value&&fe.value!==C.value,r=Je.value.size,l=tn.value;return e("div",{style:"padding: 16px 0;",children:[l&&e("div",{style:{position:"fixed",bottom:"70px",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 32px)",maxWidth:"400px",background:"white",borderRadius:"16px",padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",zIndex:100,boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},children:[e("button",{onClick:Jr,style:{background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",color:"#666"},children:"Cancel"}),e("span",{style:{fontSize:"14px",color:"#666"},children:[r," selected"]}),e("div",{style:{position:"relative"},children:[e("button",{onClick:()=>{pt.value=!pt.value},disabled:r===0,style:{background:r>0?"#4CAF50":"#ccc",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:r>0?"pointer":"default",color:"white",display:"flex",alignItems:"center",gap:"6px"},children:["Share",e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})})]}),pt.value&&r>0&&e("div",{style:{position:"absolute",bottom:"100%",right:"0",marginBottom:"8px",background:"white",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",overflow:"hidden",minWidth:"160px"},children:[navigator.share&&e("button",{onClick:()=>Tt("native",t),style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#333"},children:[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#4CAF50",children:e("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})}),"Share..."]}),e("button",{onClick:()=>Tt("whatsapp",t),style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#25D366",borderTop:navigator.share?"1px solid #f0f0f0":"none"},children:[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),e("button",{onClick:()=>Tt("sms",t),style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#2196F3",borderTop:"1px solid #f0f0f0"},children:[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:e("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),"SMS"]}),e("button",{onClick:()=>Tt("copy",t),style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#666",borderTop:"1px solid #f0f0f0"},children:[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:e("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),"Copy text"]})]})]})]}),e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;",children:[e("h2",{style:"margin: 0; font-size: 20px;",children:o?`${fe.value}'s Games`:"My Upcoming Games"}),e("div",{style:"display: flex; gap: 8px; align-items: center;",children:[o&&e("button",{onClick:()=>{fe.value=null},style:{background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"16px",padding:"4px 12px",fontSize:"12px",cursor:"pointer",color:"#666"},children:"Back to mine"}),!o&&t.length>0&&!l&&e("button",{onClick:()=>{tn.value=!0},style:{background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"16px",padding:"6px 12px",fontSize:"13px",cursor:"pointer",color:"#666",display:"flex",alignItems:"center",gap:"6px"},children:[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})}),"Share"]})]})]}),n&&!o&&e("div",{style:{background:"#f5f5f5",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"6px",fontWeight:"500"},children:"View another member's games"}),e("select",{value:"",onChange:a=>{const s=a.target.value;s&&(fe.value=s)},style:{marginBottom:0},children:[e("option",{value:"",children:"Select a member..."}),T.value.filter(a=>a!==C.value).sort((a,s)=>a.localeCompare(s)).map(a=>e("option",{value:a,children:a},a))]})]}),t.length===0?e("div",{style:"text-align: center; padding: 48px 24px; background: #f9f9f9; border-radius: 12px;",children:[e("div",{style:"font-size: 48px; margin-bottom: 16px;",children:"ðŸ“…"}),e("p",{style:"font-size: 18px; margin: 0 0 8px 0; color: #333;",children:"No upcoming games"}),e("p",{style:"font-size: 14px; color: #666; margin: 0;",children:o?`${fe.value} has no upcoming games.`:"Check in for a date to get matched with other players!"})]}):e("div",{style:"display: flex; flex-direction: column; gap: 12px;",children:t.map((a,s)=>{const d=a.players.filter(h=>ht(h.name)!==ht(i)),c=`mygames-${a.date}-${a.type}-${s}`,f=At.value===c,p=a.needed||1,u=Je.value.has(c);return e("div",{onClick:()=>{l&&qr(c)},style:{padding:"16px",background:a.isForming?"#FFF8E1":"#E8F5E9",borderRadius:"12px",border:l&&u?"2px solid #4CAF50":a.isForming?"1px solid #FFE082":"1px solid #A5D6A7",cursor:l?"pointer":"default",position:"relative"},children:[l&&e("div",{style:{position:"absolute",top:"12px",right:"12px",width:"24px",height:"24px",borderRadius:"6px",border:u?"none":"2px solid #ccc",background:u?"#4CAF50":"white",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"bold"},children:u&&"âœ“"}),e("div",{onClick:h=>{l||(h.stopPropagation(),vi(a.date))},style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",cursor:"pointer",paddingRight:l?"32px":"0"},children:[e("div",{style:"display: flex; align-items: center; gap: 8px;",children:[e("span",{style:"font-weight: 600; color: #333; font-size: 16px;",children:W(a.date)}),e("span",{style:{fontSize:"12px",padding:"2px 8px",borderRadius:"10px",background:"#f0f0f0",color:"#666",fontWeight:"500"},children:Fn(a.type)})]}),a.isForming?e("span",{style:"display: flex; align-items: center; gap: 4px; color: #F57C00; font-size: 12px; font-weight: 600;",children:[e("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",children:e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),"Need ",p]}):e("span",{style:"display: flex; align-items: center; gap: 4px; color: #4CAF50; font-size: 12px; font-weight: 600;",children:[e("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Ready"]})]}),e("div",{onClick:h=>{l||(h.stopPropagation(),vi(a.date))},style:{fontSize:"15px",color:"#555",cursor:"pointer",paddingRight:l?"32px":"0"},children:d.length>0?e(R,{children:[e("span",{style:"color: #888;",children:"Playing with "}),e("span",{style:"font-weight: 500;",children:d.map(h=>h.name).join(", ")})]}):e("span",{style:"color: #888; font-style: italic;",children:["Waiting for ",p," more player",p>1?"s":""]})}),a.isForming&&!l&&e("div",{style:"margin-top: 12px; position: relative;",children:[e("button",{"data-share-button":!0,onClick:h=>{h.stopPropagation(),At.value=f?null:c},style:{background:f?"#e65100":"#ff9800",border:"none",borderRadius:"16px",padding:"6px 14px",fontSize:"13px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"white",transition:"all 0.2s",boxShadow:"0 2px 6px rgba(255, 152, 0, 0.4)"},children:[e("span",{children:"Invite"}),e("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",style:{transform:f?"rotate(180deg)":"none",transition:"transform 0.2s"},children:e("path",{d:"M7 10l5 5 5-5z"})})]}),f&&e("div",{class:"share-dropdown",style:{position:"absolute",bottom:"100%",left:"0",marginBottom:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,overflow:"hidden",minWidth:"140px"},children:[e("button",{onClick:h=>{h.stopPropagation(),yn(a,"whatsapp")},style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#25D366"},children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),e("button",{onClick:h=>{h.stopPropagation(),yn(a,"sms")},style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#2196F3",borderTop:"1px solid #f0f0f0"},children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),"SMS"]}),e("button",{onClick:h=>{h.stopPropagation(),yn(a,"copy")},style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",width:"100%",border:"none",background:"white",cursor:"pointer",fontSize:"14px",color:"#666",borderTop:"1px solid #f0f0f0"},children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:e("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),"Copy"]})]})]})]},s)})}),t.length>0&&e("p",{style:"font-size: 13px; color: #888; text-align: center; margin-top: 16px;",children:"Tap a game to view that day's details"})]})}const Lt=v(!1),xn=v(!1),Le=v(!1),Be=v(!1),q=v([]);function eo(t){return t.toLowerCase().replace(/\s+/g,"")}async function Xr(){const t=S.value,n=C.value;if(!(!t||!n))try{const l=(await M().ref(`groups/${t}/userNotifications/${eo(n)}/preferences`).once("value")).val()||{};Le.value=l.activityAlerts===!0,Be.value=l.matchConfirmations!==!1,q.value=l.unwatchedMembers||l.mutedMembers||[]}catch(i){console.error("Error loading notification prefs from Firebase:",i)}}async function Mt(){const t=S.value,n=C.value;if(!t||!n)return;const i={activityAlerts:Le.value,matchConfirmations:Be.value,unwatchedMembers:q.value};try{await M().ref(`groups/${t}/userNotifications/${eo(n)}/preferences`).set(i),y("Preferences saved","success")}catch(o){console.error("Error saving notification prefs:",o),y("Failed to save preferences","error")}}function el(t){q.value.includes(t)?q.value=q.value.filter(n=>n!==t):q.value=[...q.value,t],Mt()}function tl(){q.value=[],Mt()}function nl(){q.value=T.value.filter(t=>t!==C.value),Mt()}function il(t){return!q.value.includes(t)}function ol(t){t.read||Oo(t.id),t.date&&(D.value=t.date,te.value="checkin")}function rl(t){const n=new Date(t),o=new Date().getTime()-t;return o<6e4?"Just now":o<36e5?`${Math.floor(o/6e4)}m ago`:o<864e5?`${Math.floor(o/36e5)}h ago`:n.toLocaleDateString([],{month:"short",day:"numeric"})}function ll(){const t=sn.value,n=t.filter(i=>!i.read).length;return j(()=>{Xr()},[]),e("div",{style:"padding: 16px 0;",children:[xn.value&&e("div",{style:"position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1002;",children:e("div",{style:"background: white; padding: 20px; border-radius: 12px; max-width: 350px; width: 90%;",children:[e("h3",{style:"margin-top: 0; margin-bottom: 8px; color: #333;",children:"Watched Members"}),e("p",{style:"margin: 0 0 12px 0; font-size: 13px; color: #666;",children:"Get activity alerts from these members"}),e("div",{style:"display: flex; gap: 8px; margin-bottom: 12px;",children:[e("button",{onClick:tl,style:"flex: 1; padding: 8px; background: #E8F5E9; color: #2E7D32; border: 1px solid #A5D6A7; border-radius: 6px; font-size: 13px; cursor: pointer; font-weight: 500;",children:"Select All"}),e("button",{onClick:nl,style:"flex: 1; padding: 8px; background: #f5f5f5; color: #666; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 13px; cursor: pointer; font-weight: 500;",children:"Deselect All"})]}),e("div",{style:"max-height: 300px; overflow-y: auto;",children:T.value.filter(i=>i!==C.value).map(i=>{const o=il(i);return e("button",{onClick:()=>el(i),style:{display:"flex",alignItems:"center",gap:"10px",width:"100%",textAlign:"left",padding:"12px",marginBottom:"4px",border:o?"1px solid #A5D6A7":"1px solid #e0e0e0",borderRadius:"8px",background:o?"#E8F5E9":"white",color:"#333",cursor:"pointer",fontSize:"14px",fontWeight:"normal"},children:[e("span",{style:{width:"20px",height:"20px",borderRadius:"4px",border:o?"none":"2px solid #ccc",background:o?"#4CAF50":"white",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",flexShrink:0},children:o&&"âœ“"}),i]},i)})}),e("button",{onClick:()=>{xn.value=!1},style:"width: 100%; margin-top: 12px; background: #4CAF50; color: white;",children:"Done"})]})}),e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;",children:[e("h2",{style:"margin: 0; font-size: 20px;",children:["Notifications",n>0&&e("span",{style:"margin-left: 8px; font-size: 14px; color: #666; font-weight: 400;",children:["(",n," unread)"]})]}),n>0&&e("button",{onClick:Go,style:{background:"none",border:"none",color:"#4CAF50",fontSize:"14px",cursor:"pointer",padding:"4px 8px"},children:"Mark all read"})]}),e("div",{style:"margin-bottom: 16px; border: 1px solid #e0e0e0; border-radius: 12px; overflow: hidden;",children:[e("button",{onClick:()=>{Lt.value=!Lt.value},style:"width: 100%; padding: 14px 16px; background: #f9f9f9; border: none; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-size: 15px; font-weight: 500;",children:[e("span",{style:"display: flex; align-items: center; gap: 8px; color: #333;",children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#666",children:e("path",{d:"M19.14,12.94c0.04-0.31,0.06-0.63,0.06-0.94c0-0.31-0.02-0.63-0.06-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.37,4.82,11.69,4.82,12s0.02,0.63,0.06,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})}),"Alert Settings"]}),e("span",{style:{color:"#999",transform:Lt.value?"rotate(180deg)":"none",transition:"transform 0.2s"},children:"â–¼"})]}),Lt.value&&e("div",{style:"padding: 16px; background: #fff; border-top: 1px solid #e0e0e0;",children:[e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px;",children:[e("div",{children:[e("div",{style:"font-weight: 500; font-size: 14px; color: #333;",children:"Activity alerts"}),e("div",{style:"font-size: 12px; color: #666;",children:"Check-ins, cancellations, notes"})]}),e("label",{style:"position: relative; display: inline-block; width: 48px; height: 26px;",children:[e("input",{type:"checkbox",checked:Le.value,onChange:i=>{Le.value=i.target.checked,Mt()},style:"opacity: 0; width: 0; height: 0;"}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:Le.value?"#4CAF50":"#ccc",transition:"0.3s",borderRadius:"26px"},children:e("span",{style:{position:"absolute",height:"20px",width:"20px",left:Le.value?"25px":"3px",bottom:"3px",backgroundColor:"white",transition:"0.3s",borderRadius:"50%"}})})]})]}),e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;",children:[e("div",{children:[e("div",{style:"font-weight: 500; font-size: 14px; color: #333;",children:"Match confirmations"}),e("div",{style:"font-size: 12px; color: #666;",children:"When you're placed in a match"})]}),e("label",{style:"position: relative; display: inline-block; width: 48px; height: 26px;",children:[e("input",{type:"checkbox",checked:Be.value,onChange:i=>{Be.value=i.target.checked,Mt()},style:"opacity: 0; width: 0; height: 0;"}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:Be.value?"#4CAF50":"#ccc",transition:"0.3s",borderRadius:"26px"},children:e("span",{style:{position:"absolute",height:"20px",width:"20px",left:Be.value?"25px":"3px",bottom:"3px",backgroundColor:"white",transition:"0.3s",borderRadius:"50%"}})})]})]}),e("div",{style:"padding-top: 12px; border-top: 1px solid #e0e0e0;",children:e("div",{style:"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;",children:[e("div",{children:[e("div",{style:"font-weight: 500; font-size: 14px; color: #333;",children:"Watched members"}),e("div",{style:"font-size: 12px; color: #666;",children:(()=>{const i=T.value.filter(r=>r!==C.value);return`Watching ${i.length-q.value.length} of ${i.length} members`})()})]}),e("button",{onClick:()=>{xn.value=!0},style:"background: #E8F5E9; color: #2E7D32; border: 1px solid #A5D6A7; padding: 6px 12px; border-radius: 6px; font-size: 13px; cursor: pointer; font-weight: 500;",children:"Edit"})]})})]})]}),t.length===0?e("div",{style:"text-align: center; padding: 48px 24px; background: #f9f9f9; border-radius: 12px;",children:[e("div",{style:"font-size: 48px; margin-bottom: 16px;",children:"ðŸ””"}),e("p",{style:"font-size: 18px; margin: 0 0 8px 0; color: #333;",children:"No notifications"}),e("p",{style:"font-size: 14px; color: #666; margin: 0;",children:"You'll see updates about matches and check-ins here"})]}):e("div",{style:"display: flex; flex-direction: column; gap: 8px;",children:t.map(i=>e("div",{onClick:()=>ol(i),style:{padding:"14px 16px",background:i.read?"#f9f9f9":"#E8F5E9",borderRadius:"10px",cursor:i.date?"pointer":"default",border:i.read?"1px solid #e0e0e0":"1px solid #A5D6A7",position:"relative"},children:e("div",{style:"display: flex; justify-content: space-between; align-items: flex-start;",children:[e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 15px; color: #333; margin-bottom: 6px;",children:[!i.read&&e("span",{style:"display: inline-block; width: 8px; height: 8px; background: #4CAF50; border-radius: 50%; margin-right: 8px;"}),i.message]}),e("div",{style:"font-size: 12px; color: #888; display: flex; align-items: center; gap: 8px; flex-wrap: wrap;",children:[e("span",{children:rl(i.timestamp)}),i.date&&e("span",{style:"color: #4CAF50; font-weight: 500; display: flex; align-items: center; gap: 2px;",children:[W(i.date)," â†’"]})]})]}),e("button",{onClick:o=>{o.stopPropagation(),Ho(i.id)},style:{background:"none",border:"none",color:"#999",fontSize:"18px",cursor:"pointer",padding:"0 4px",marginLeft:"8px"},children:"Ã—"})]})},i.id))})]})}function al(){const t=N.value.groupDescription,n=N.value.groupRules,i=t||n,o=[{title:"Getting Started",icon:"ðŸŽ¾",content:["When you first open the app, you'll be asked to select your name from the member list.","Use the date selector to pick the day you want to play.","Check in by selecting your match preference and optionally setting your available times."]},{title:"Check-in Options",icon:"âœ…",content:["Doubles - You want to play doubles matches (4 players).","Singles - You want to play singles matches (2 players).","Both - You're flexible and happy to play either format.","Rotation - Enable this option to join 3-player rotation matches where players take turns.","Time Range - Set your earliest and latest available times to help coordinate."]},{title:"Match Types",icon:"ðŸ‘¥",content:["Doubles (green) - A confirmed 4-player doubles match.","Singles (green) - A confirmed 2-player singles match.","Rotation (green) - A confirmed 3-player match with rotating play.","Forming (yellow) - A match that needs more players to be complete."]},{title:"My Games",icon:"ðŸ“…",content:["View all your upcoming games across all dates at a glance.","Tap any game card to jump directly to that day's check-in page.","Yellow background indicates the game is still forming and needs more players.","Green background means the game is confirmed and ready to play."]},{title:"Alerts",icon:"ðŸ””",content:["Get notified when matches are formed or when players join/leave.","Unread alerts show a red badge with the count on the tab.","Tap a notification to mark it as read.","Access notification settings to configure your preferences."]},{title:"Profile",icon:"ðŸ‘¤",content:["Access your profile by tapping your name badge in the top-right corner.","Edit your display name, phone number, and email address.","Change your user session to switch to a different account.","Admin login is available for group administrators."]},{title:"Tips",icon:"ðŸ’¡",content:["Check in early to get matched with your preferred players.",`Select "Both" if you're flexible - it increases your chances of getting a match.`,"Set your time preferences to help organizers coordinate scheduling.","Enable rotation if you're open to 3-player matches."]},{title:"Admin Features",icon:"âš™ï¸",content:["Access admin mode via Admin Login in your Profile page.","Manage Members - Add, edit, or remove group members.","Group Settings - Configure group name, PINs, weather location, story, and rules.","Activity History - View all check-ins and changes with option to delete test data.","Group Insights - View game stats, player activity trends, and analytics."]}],r=n?n.split(`
`).filter(l=>l.trim()):[];return e("div",{style:"padding: 16px 0;",children:[i&&e("div",{style:{marginBottom:"24px"},children:[e("h2",{style:"margin: 0 0 16px 0; font-size: 20px;",children:["About ",G.value]}),t&&e("div",{style:{background:"#E8F5E9",borderRadius:"12px",padding:"16px",border:"1px solid #C8E6C9",marginBottom:"12px"},children:[e("h3",{style:"margin: 0 0 8px 0; font-size: 15px; color: #2E7D32; display: flex; align-items: center; gap: 8px;",children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#4CAF50",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),"Our Story"]}),e("p",{style:"margin: 0; color: #333; font-size: 14px; line-height: 1.6; white-space: pre-wrap;",children:t})]}),r.length>0&&e("div",{style:{background:"#FFF8E1",borderRadius:"12px",padding:"16px",border:"1px solid #FFECB3"},children:[e("h3",{style:"margin: 0 0 12px 0; font-size: 15px; color: #F57C00; display: flex; align-items: center; gap: 8px;",children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#FF9800",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})}),"Rules & Tips"]}),e("ul",{style:"margin: 0; padding-left: 20px; color: #333; font-size: 14px; line-height: 1.6;",children:r.map((l,a)=>e("li",{style:"margin-bottom: 6px;",children:l},a))})]})]}),e("h2",{style:"margin: 0 0 16px 0; font-size: 20px;",children:"User Guide"}),e("div",{style:"display: flex; flex-direction: column; gap: 16px;",children:o.map((l,a)=>e("div",{style:{background:"#f9f9f9",borderRadius:"12px",padding:"16px",border:"1px solid #e0e0e0"},children:[e("h3",{style:"margin: 0 0 12px 0; font-size: 16px; display: flex; align-items: center; gap: 8px;",children:[e("span",{children:l.icon}),e("span",{children:l.title})]}),e("ul",{style:"margin: 0; padding-left: 20px; color: #555; font-size: 14px; line-height: 1.6;",children:l.content.map((s,d)=>e("li",{style:"margin-bottom: 4px;",children:s},d))})]},a))}),e("p",{style:"font-size: 13px; color: #888; text-align: center; margin-top: 20px;",children:"Need more help? Contact your group administrator."})]})}function bn(t){return t.toLowerCase().replace(/\s+/g,"")}const sl=Ke(()=>{const t=J.value,n=new Date;n.setHours(0,0,0,0);const i=new Date(n);i.setDate(i.getDate()-30);const o=new Date(n);o.setDate(o.getDate()-7);let r=0,l=0,a=0,s=0,d=0,c=0;const f={},p={0:0,1:0,2:0,3:0,4:0,5:0,6:0},u={};let h=0,g=0;const x=Object.keys(t).sort();for(const k of x){const $=t[k]||[];if($.length===0)continue;const A=new Date(k+"T00:00:00");if(!(A<n))continue;h++,g+=$.length;const ie=A>=i,oe=A>=o,Z=A.getDay(),O=new Date(A);O.setDate(O.getDate()-O.getDay());const re=O.toISOString().split("T")[0],{matches:to}=Jn($);for(const X of to)if(!(X.type==="waiting"||X.type==="doubles-forming"||X.type==="singles-forming")){r++,p[Z]++,u[re]=(u[re]||0)+1,ie&&d++,oe&&c++,X.type==="doubles"?l++:X.type==="singles"?a++:X.type==="singles-or-practice"&&s++;for(const Xe of X.players){const Re=bn(Xe.name);f[Re]||(f[Re]={gamesPlayed:0,checkIns:0,lastPlayed:k,doublesPlayed:0,singlesPlayed:0}),f[Re].gamesPlayed++,f[Re].lastPlayed=k,X.type==="doubles"?f[Re].doublesPlayed++:f[Re].singlesPlayed++}}for(const X of $){const Xe=bn(X.name);f[Xe]||(f[Xe]={gamesPlayed:0,checkIns:0,lastPlayed:"",doublesPlayed:0,singlesPlayed:0}),f[Xe].checkIns++}}const m=Object.entries(f).map(([k,$])=>({name:T.value.find(Q=>bn(Q)===k)||k,...$,participationRate:$.checkIns>0?Math.round($.gamesPlayed/$.checkIns*100):0})).sort((k,$)=>$.gamesPlayed-k.gamesPlayed).slice(0,10),b=Object.entries(p).sort((k,$)=>$[1]-k[1])[0],_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=Object.entries(u).sort((k,$)=>$[0].localeCompare(k[0])).slice(0,8).reverse();return{totalGames:r,doublesGames:l,singlesGames:a,rotationGames:s,last30DaysGames:d,last7DaysGames:c,activeDays:h,totalCheckIns:g,averagePlayersPerDay:h>0?(g/h).toFixed(1):"0",topPlayers:m,mostPopularDay:b?_[parseInt(b[0])]:"N/A",mostPopularDayCount:b?b[1]:0,dayOfWeekCounts:p,recentWeeks:w,totalMembers:T.value.length,activeMembersLast30Days:Object.values(f).filter(k=>k.lastPlayed?new Date(k.lastPlayed+"T00:00:00")>=i:!1).length}});function _n({label:t,value:n,subtext:i}){return e("div",{style:{background:"#f9f9f9",borderRadius:"12px",padding:"16px",textAlign:"center",flex:"1",minWidth:"100px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#4CAF50"},children:n}),e("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:t}),i&&e("div",{style:{fontSize:"11px",color:"#888",marginTop:"2px"},children:i})]})}function wn({value:t,max:n,color:i="#4CAF50"}){const o=n>0?t/n*100:0;return e("div",{style:{background:"#e0e0e0",borderRadius:"4px",height:"8px",flex:"1",overflow:"hidden"},children:e("div",{style:{background:i,height:"100%",width:`${o}%`,borderRadius:"4px",transition:"width 0.3s ease"}})})}function cl(){const t=sl.value,n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=Math.max(...Object.values(t.dayOfWeekCounts));return e("div",{style:"padding: 16px;",children:[e("h3",{style:"margin: 0 0 16px 0; font-size: 18px; color: #333;",children:"Group Insights"}),e("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",flexWrap:"wrap"},children:[e(_n,{label:"Total Games",value:t.totalGames,subtext:"all time"}),e(_n,{label:"Last 30 Days",value:t.last30DaysGames}),e(_n,{label:"Last 7 Days",value:t.last7DaysGames})]}),e("div",{style:{background:"#f9f9f9",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[e("h3",{style:"margin: 0 0 12px 0; font-size: 16px;",children:"Game Types"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("span",{style:{width:"70px",fontSize:"14px"},children:"Doubles"}),e(wn,{value:t.doublesGames,max:t.totalGames,color:"#4CAF50"}),e("span",{style:{width:"40px",textAlign:"right",fontSize:"14px",fontWeight:"600"},children:t.doublesGames})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("span",{style:{width:"70px",fontSize:"14px"},children:"Singles"}),e(wn,{value:t.singlesGames,max:t.totalGames,color:"#2196F3"}),e("span",{style:{width:"40px",textAlign:"right",fontSize:"14px",fontWeight:"600"},children:t.singlesGames})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("span",{style:{width:"70px",fontSize:"14px"},children:"Rotation"}),e(wn,{value:t.rotationGames,max:t.totalGames,color:"#FF9800"}),e("span",{style:{width:"40px",textAlign:"right",fontSize:"14px",fontWeight:"600"},children:t.rotationGames})]})]})]}),e("div",{style:{background:"#f9f9f9",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[e("h3",{style:"margin: 0 0 12px 0; font-size: 16px;",children:"Activity by Day"}),e("div",{style:{display:"flex",gap:"4px",alignItems:"flex-end",height:"80px"},children:n.map((o,r)=>{const l=t.dayOfWeekCounts[r],a=i>0?l/i*60:0;return e("div",{style:{flex:"1",textAlign:"center"},children:[e("div",{style:{background:r===Object.entries(t.dayOfWeekCounts).sort((s,d)=>d[1]-s[1])[0]?.[0]?"#4CAF50":"#c8e6c9",height:`${Math.max(a,4)}px`,borderRadius:"4px 4px 0 0",marginBottom:"4px",transition:"height 0.3s ease"}}),e("span",{style:{fontSize:"10px",color:"#666"},children:o})]},o)})}),e("p",{style:{fontSize:"13px",color:"#666",margin:"12px 0 0 0",textAlign:"center"},children:["Most popular: ",e("strong",{children:t.mostPopularDay})," (",t.mostPopularDayCount," games)"]})]}),t.recentWeeks.length>0&&e("div",{style:{background:"#f9f9f9",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[e("h3",{style:"margin: 0 0 12px 0; font-size: 16px;",children:"Weekly Trend"}),e("div",{style:{display:"flex",gap:"4px",alignItems:"flex-end",height:"60px"},children:t.recentWeeks.map(([o,r])=>{const l=Math.max(...t.recentWeeks.map(c=>c[1])),a=l>0?r/l*50:0,s=new Date(o+"T00:00:00"),d=`${s.getMonth()+1}/${s.getDate()}`;return e("div",{style:{flex:"1",textAlign:"center"},children:[e("div",{style:{background:"#4CAF50",height:`${Math.max(a,4)}px`,borderRadius:"4px 4px 0 0",marginBottom:"4px"}}),e("span",{style:{fontSize:"9px",color:"#666"},children:d})]},o)})})]}),e("div",{style:{background:"#f9f9f9",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[e("h3",{style:"margin: 0 0 12px 0; font-size: 16px;",children:"Most Active Players"}),e("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#888",marginBottom:"8px",padding:"0 4px"},children:[e("span",{children:"Player"}),e("span",{children:"Games"})]}),t.topPlayers.length===0?e("p",{style:{fontSize:"14px",color:"#666",textAlign:"center",margin:"16px 0"},children:"No game data yet"}):e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.topPlayers.map((o,r)=>e("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:r<3?"#E8F5E9":"white",borderRadius:"8px"},children:[e("span",{style:{width:"20px",height:"20px",borderRadius:"50%",background:r===0?"#FFD700":r===1?"#C0C0C0":r===2?"#CD7F32":"#e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600",color:r<3?"#333":"#666"},children:r+1}),e("span",{style:{flex:"1",fontSize:"14px"},children:o.name}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#4CAF50"},children:o.gamesPlayed})]},o.name))})]}),e("div",{style:{background:"#E3F2FD",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[e("h3",{style:"margin: 0 0 12px 0; font-size: 16px;",children:"Group Health"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px"},children:[e("span",{style:{color:"#666"},children:"Total members"}),e("span",{style:{fontWeight:"600"},children:t.totalMembers})]}),e("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px"},children:[e("span",{style:{color:"#666"},children:"Active last 30 days"}),e("span",{style:{fontWeight:"600"},children:t.activeMembersLast30Days})]}),e("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px"},children:[e("span",{style:{color:"#666"},children:"Avg players/day"}),e("span",{style:{fontWeight:"600"},children:t.averagePlayersPerDay})]}),e("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px"},children:[e("span",{style:{color:"#666"},children:"Days with activity"}),e("span",{style:{fontWeight:"600"},children:t.activeDays})]})]})]}),e("p",{style:"font-size: 13px; color: #888; text-align: center; margin-top: 16px;",children:"Stats are based on completed games from past dates"})]})}function mi(){const t=S.value;return t?sessionStorage.getItem(`adminAuth_${t}`)==="true":!1}function dl(){const[t,n]=le(mi()),[i,o]=le(!1),[r,l]=le(""),[a,s]=le(""),[d,c]=le(""),[f,p]=le(!1),[u,h]=le(!1);j(()=>{const w=setInterval(()=>{n(mi())},1e3);return()=>clearInterval(w)},[]),j(()=>{const w=C.value;if(w&&(l(w),L.value)){const k=L.value[w];k&&(s(k.phone||""),c(k.email||""))}},[C.value,L.value]);const g=async()=>{const w=C.value;if(!w)return;p(!0);const k=r.trim();if(k!==w){const A=await Yi(w,k);if(A){C.value=k;const Q=S.value;Q&&localStorage.setItem(`sessionUser_${Q}`,k),await ci(k,{phone:a,email:d})}p(!1),A&&o(!1)}else{const A=await ci(w,{phone:a,email:d});p(!1),A&&o(!1)}},x=()=>{const w=C.value;if(w&&(l(w),L.value)){const k=L.value[w];k&&(s(k.phone||""),c(k.email||""))}o(!1)},m=C.value&&L.value?L.value[C.value]:null,b=()=>{if(confirm("Change user? This will clear your current session.")){const w=S.value;w&&localStorage.removeItem(`sessionUser_${w}`),C.value="",y("Please select your name","info"),St.value=!0}},_=()=>{const w=S.value;w&&(sessionStorage.removeItem(`adminAuth_${w}`),n(!1),y("Logged out of admin mode","info"))};return e("div",{style:"padding: 16px 0;",children:[e("h2",{style:"margin: 0 0 16px 0; font-size: 20px;",children:"Profile"}),e("div",{style:{background:"#fff",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"1px solid #e0e0e0"},children:[!i&&e("div",{style:"display: flex; justify-content: flex-end; margin-bottom: 8px;",children:e("button",{onClick:()=>o(!0),style:{background:"none",border:"none",color:"#4CAF50",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},children:[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:e("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),"Edit"]})}),i?e("div",{style:"display: flex; flex-direction: column; gap: 12px;",children:[e("div",{children:[e("label",{style:"display: block; font-size: 13px; color: #666; margin-bottom: 4px;",children:"Display Name"}),e("input",{type:"text",value:r,onInput:w=>l(w.target.value),placeholder:"Your name",style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"}})]}),e("div",{children:[e("label",{style:"display: block; font-size: 13px; color: #666; margin-bottom: 4px;",children:"Phone Number"}),e("input",{type:"tel",value:a,onInput:w=>s(w.target.value),placeholder:"e.g., (555) 123-4567",style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"}})]}),e("div",{children:[e("label",{style:"display: block; font-size: 13px; color: #666; margin-bottom: 4px;",children:"Email Address"}),e("input",{type:"email",value:d,onInput:w=>c(w.target.value),placeholder:"e.g., name@example.com",style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"}})]}),e("div",{style:"display: flex; gap: 8px; margin-top: 4px;",children:[e("button",{onClick:x,disabled:f,style:{flex:1,padding:"10px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Cancel"}),e("button",{onClick:g,disabled:f,style:{flex:1,padding:"10px",background:"#4CAF50",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",opacity:f?.7:1},children:f?"Saving...":"Save"})]})]}):e("div",{style:"display: flex; flex-direction: column; gap: 8px;",children:[e("div",{style:"display: flex; align-items: center; gap: 8px;",children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#888",children:e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),e("span",{style:{color:"#333",fontSize:"14px"},children:C.value||"Not set"})]}),e("div",{style:"display: flex; align-items: center; gap: 8px;",children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#888",children:e("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),e("span",{style:{color:m?.phone?"#333":"#aaa",fontSize:"14px"},children:m?.phone||"No phone number"})]}),e("div",{style:"display: flex; align-items: center; gap: 8px;",children:[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#888",children:e("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),e("span",{style:{color:m?.email?"#333":"#aaa",fontSize:"14px"},children:m?.email||"No email address"})]}),!m?.phone&&!m?.email&&e("p",{style:"font-size: 13px; color: #888; margin: 8px 0 0 0;",children:"Add your contact info so organizers can reach you about matches."})]})]}),e("div",{style:"display: flex; flex-direction: column; gap: 8px;",children:[t&&e(R,{children:[e("button",{onClick:()=>{cn.value=!0},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",width:"100%",textAlign:"left"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#E8F5E9",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"#4CAF50",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 16px; font-weight: 500; color: #333;",children:"Manage Members"}),e("div",{style:"font-size: 13px; color: #888;",children:[T.value.length," members in group"]})]}),e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#ccc",children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]}),e("button",{onClick:()=>{ze.value=!0},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",width:"100%",textAlign:"left"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"#666",children:e("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})})}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 16px; font-weight: 500; color: #333;",children:"Group Settings"}),e("div",{style:"font-size: 13px; color: #888;",children:"Name, PIN, location, and other settings"})]}),e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#ccc",children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]}),e("button",{onClick:()=>{Oe.value=!0},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",width:"100%",textAlign:"left"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"#666",children:e("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})})}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 16px; font-weight: 500; color: #333;",children:"Activity History"}),e("div",{style:"font-size: 13px; color: #888;",children:"View recent check-ins and changes"})]}),e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#ccc",children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]}),e("button",{onClick:()=>h(!u),style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:u?"#E3F2FD":"#fff",border:u?"1px solid #90CAF9":"1px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",width:"100%",textAlign:"left"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#E8F5E9",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"#4CAF50",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 16px; font-weight: 500; color: #333;",children:"Group Insights"}),e("div",{style:"font-size: 13px; color: #888;",children:"Game stats, player activity, and trends"})]}),e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#ccc",style:{transform:u?"rotate(90deg)":"none",transition:"transform 0.2s"},children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]}),u&&e("div",{style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"12px",overflow:"hidden"},children:e(cl,{})}),e("button",{onClick:_,style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",width:"100%",textAlign:"left"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#FFF3E0",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"#FF9800",children:e("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})})}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 16px; font-weight: 500; color: #FF9800;",children:"Exit Admin Mode"}),e("div",{style:"font-size: 13px; color: #888;",children:"Return to regular user view"})]})]})]}),!t&&e("button",{onClick:()=>{ze.value=!0},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",width:"100%",textAlign:"left"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#FFF3E0",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"#FF9800",children:e("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"})})}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 16px; font-weight: 500; color: #333;",children:"Admin Login"}),e("div",{style:"font-size: 13px; color: #888;",children:"Access group settings and member management"})]}),e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#ccc",children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]}),e("button",{onClick:b,style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",width:"100%",textAlign:"left",marginTop:t?"8px":"0"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"#666",children:e("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"})})}),e("div",{style:"flex: 1;",children:[e("div",{style:"font-size: 16px; font-weight: 500; color: #333;",children:"Change User"}),e("div",{style:"font-size: 13px; color: #888;",children:"Switch to a different account"})]}),e("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#ccc",children:e("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]})]}),e("p",{style:"font-size: 12px; color: #aaa; text-align: center; margin-top: 32px;",children:"Tennis Coordinator v1.0"})]})}const Y=v(!1),se=v(""),ue=v("both"),pe=v(!1),_e=v(!1),nt=v(""),Pe=v(""),it=v(""),ot=v(""),rt=v(""),lt=v(""),Bt=v(!0),we=v(""),ke=v(""),jt=v(!0),Fe=v(!1);function ul(){$o(),zo(),Io(),Wo(),j(()=>{const i=S.value;if(i){if(sessionStorage.getItem("siteAdminAuth")==="true"){Fe.value=!0;return}const r=`pinAuth_${i}`,l=sessionStorage.getItem(r)==="true";Fe.value=l}},[S.value]),j(()=>{D.value=Co()},[]),j(()=>{const i=S.value;if(i){const o=localStorage.getItem(`sessionUser_${i}`);o?C.value=o:Fe.value&&(St.value=!0)}},[S.value,Fe.value]);const t=()=>{const i=S.value;i&&sessionStorage.setItem(`pinAuth_${i}`,"true"),Fe.value=!0,C.value||(St.value=!0)},n=!Fe.value&&!!N.value.groupPin;return e(R,{children:[e(qo,{isOpen:n,groupName:G.value,correctPin:N.value.groupPin,onSuccess:t}),e(wr,{}),e(cr,{}),e(xr,{}),e(or,{}),e(Xo,{}),e("div",{class:"container",id:"appContainer",style:n?"filter: blur(5px); pointer-events: none;":"",children:[e(Yo,{}),e("div",{style:"padding-bottom: 80px;",children:[te.value==="checkin"&&e(Ur,{}),te.value==="matches"&&e(Zr,{}),te.value==="notifications"&&e(ll,{}),te.value==="help"&&e(al,{}),te.value==="profile"&&e(dl,{})]})]}),e(Ko,{})]})}const Ot=v(!1),H=v({}),yi=v(!0),kn=v(null),Ce=v(null),Wt=v(null),at=v(""),Ne=v(!1),he=v(null),Ht=v("");function pl(){j(()=>{t()},[]);async function t(){try{const g=(await M().ref("siteSettings").once("value")).val()||{};kn.value=g.siteAdminPin||null,sessionStorage.getItem("siteAdminAuth")==="true"&&(Ot.value=!0,await n())}catch(u){console.error("Error initializing admin page:",u),y("Failed to initialize","error")}finally{yi.value=!1}}async function n(){try{const h=await M().ref("groups").once("value");H.value=h.val()||{}}catch(u){console.error("Error loading groups:",u),y("Failed to load groups","error")}}function i(u){u.preventDefault(),Ce.value=null;const g=u.target.querySelector("input"),x=g.value.trim();if(!x){Ce.value="Please enter a PIN";return}if(!kn.value){Ce.value="Site admin PIN not configured. Please set siteAdminPin in siteSettings in Firebase.";return}x===kn.value?(sessionStorage.setItem("siteAdminAuth","true"),Ot.value=!0,Ce.value=null,n()):(Ce.value="Incorrect PIN. Please try again.",g.value="",g.focus())}function o(){sessionStorage.removeItem("siteAdminAuth"),Ot.value=!1,H.value={}}function r(){window.location.hash="",window.location.reload()}function l(u){Wt.value===u?Wt.value=null:(Wt.value=u,at.value="")}async function a(u){const h=at.value.trim();if(!h){y("Please enter a member name","error");return}Ne.value=!0;try{const g=M(),x=H.value[u],m=x?.settings?.members||[];if(m.some(_=>_.toLowerCase()===h.toLowerCase())){y("Member already exists","error"),Ne.value=!1;return}const b=[...m,h];await g.ref(`groups/${u}/settings/members`).set(b),H.value={...H.value,[u]:{...x,settings:{...x?.settings,members:b}}},at.value="",y(`Added ${h} to the group`,"success")}catch(g){console.error("Error adding member:",g),y("Failed to add member","error")}finally{Ne.value=!1}}async function s(u,h){if(confirm(`Remove ${h} from this group?`))try{const g=M(),x=H.value[u],b=(x?.settings?.members||[]).filter(_=>_!==h);await g.ref(`groups/${u}/settings/members`).set(b),H.value={...H.value,[u]:{...x,settings:{...x?.settings,members:b}}},y(`Removed ${h}`,"success")}catch(g){console.error("Error removing member:",g),y("Failed to remove member","error")}}function d(u,h){he.value={groupId:u,originalName:h},Ht.value=h}async function c(){const u=he.value;if(!u)return;const h=Ht.value.trim();if(!h){y("Name cannot be empty","error");return}if(h===u.originalName){he.value=null;return}const g=H.value[u.groupId],x=g?.settings?.members||[];if(x.some(m=>m.toLowerCase()===h.toLowerCase()&&m!==u.originalName)){y("A member with this name already exists","error");return}try{const m=M(),b=x.map($=>$===u.originalName?h:$);await m.ref(`groups/${u.groupId}/settings/members`).set(b);const _=g?.settings?.memberDetails||{};if(_[u.originalName]){const $=_[u.originalName];await m.ref(`groups/${u.groupId}/settings/memberDetails/${u.originalName}`).remove(),await m.ref(`groups/${u.groupId}/settings/memberDetails/${h}`).set($);const A={..._};A[h]=$,delete A[u.originalName],H.value={...H.value,[u.groupId]:{...g,settings:{...g?.settings,members:b,memberDetails:A}}}}else H.value={...H.value,[u.groupId]:{...g,settings:{...g?.settings,members:b}}};const k=(await m.ref(`groups/${u.groupId}/checkins`).once("value")).val()||{};for(const[$,A]of Object.entries(k))if(A&&typeof A=="object"){const Q=Object.values(A);let ie=!1;const oe=Q.map(Z=>Z&&Z.name===u.originalName?(ie=!0,{...Z,name:h}):Z);ie&&await m.ref(`groups/${u.groupId}/checkins/${$}`).set(oe)}he.value=null,y(`Renamed ${u.originalName} to ${h}`,"success")}catch(m){console.error("Error renaming member:",m),y("Failed to rename member","error")}}if(yi.value)return e("div",{class:"site-admin-page",children:e("div",{class:"site-admin-container",children:e("div",{class:"site-admin-loading",children:[e("div",{class:"loading-spinner-icon"}),e("p",{children:"Loading..."})]})})});if(!Ot.value)return e("div",{class:"site-admin-page",children:e("div",{class:"site-admin-container",children:e("div",{class:"site-admin-login-card",children:[e("div",{class:"site-admin-header",children:[e("span",{class:"site-admin-icon",children:"ðŸ”"}),e("h1",{children:"Site Administration"}),e("p",{class:"site-admin-subtitle",children:"Tennis Coordinator Platform"})]}),e("form",{onSubmit:i,class:"site-admin-form",children:[e("div",{class:"form-group",children:[e("label",{for:"admin-pin",children:"Administrator PIN"}),e("input",{id:"admin-pin",type:"password",placeholder:"Enter your PIN",class:"site-admin-input",autoFocus:!0})]}),Ce.value&&e("div",{class:"site-admin-error",children:[e("span",{class:"error-icon",children:"âš ï¸"}),Ce.value]}),e("button",{type:"submit",class:"site-admin-submit",children:"Sign In"})]}),e("div",{class:"site-admin-footer",children:e("button",{onClick:r,class:"back-to-home",children:"â† Back to Home"})})]})})});const f=Object.entries(H.value),p=f.reduce((u,[,h])=>u+(h.settings?.members?.length||0),0);return e("div",{class:"site-admin-page",children:e("div",{class:"site-admin-dashboard",children:[e("header",{class:"site-admin-dashboard-header",children:[e("div",{class:"header-left",children:[e("h1",{children:"ðŸŽ¾ Site Administration"}),e("p",{class:"header-subtitle",children:"Tennis Coordinator Platform"})]}),e("button",{onClick:o,class:"logout-button",children:"Sign Out"})]}),e("div",{class:"site-admin-stats",children:[e("div",{class:"stat-card",children:[e("span",{class:"stat-value",children:f.length}),e("span",{class:"stat-label",children:"Tennis Groups"})]}),e("div",{class:"stat-card",children:[e("span",{class:"stat-value",children:p}),e("span",{class:"stat-label",children:"Total Members"})]})]}),e("section",{class:"site-admin-section",children:[e("h2",{children:"All Tennis Groups"}),f.length===0?e("div",{class:"empty-state",children:e("p",{children:"No tennis groups have been created yet."})}):e("div",{class:"groups-grid",children:f.map(([u,h])=>{const g=h.settings?.members||[],x=Wt.value===u;return e("div",{class:`group-card ${x?"expanded":""}`,children:[e("div",{class:"group-card-header",children:[e("h3",{children:h.settings?.groupName||u}),e("span",{class:"group-id",children:["#",u]})]}),e("div",{class:"group-card-body",children:[e("div",{class:"group-stat",children:[e("span",{class:"group-stat-icon",children:"ðŸ‘¥"}),e("span",{children:[g.length," members"]})]}),h.settings?.location?.name&&e("div",{class:"group-stat",children:[e("span",{class:"group-stat-icon",children:"ðŸ“"}),e("span",{children:h.settings.location.name})]})]}),x&&e("div",{class:"group-members-section",children:[e("div",{class:"members-header",children:e("h4",{children:"Members"})}),e("div",{class:"add-member-form",children:[e("input",{type:"text",placeholder:"Enter member name",value:at.value,onInput:m=>{at.value=m.target.value},onKeyDown:m=>{m.key==="Enter"&&(m.preventDefault(),a(u))},class:"member-input",disabled:Ne.value}),e("button",{onClick:()=>a(u),class:"add-member-btn",disabled:Ne.value,children:Ne.value?"...":"Add"})]}),e("div",{class:"members-list",children:g.length===0?e("p",{class:"no-members",children:"No members yet. Add the first member above."}):g.map(m=>{const b=he.value?.groupId===u&&he.value?.originalName===m;return e("div",{class:"member-item",children:b?e(R,{children:[e("input",{type:"text",value:Ht.value,onInput:_=>{Ht.value=_.target.value},onKeyDown:_=>{_.key==="Enter"?(_.preventDefault(),c()):_.key==="Escape"&&(he.value=null)},class:"edit-member-input",autoFocus:!0}),e("button",{onClick:c,class:"save-member-btn",title:"Save",children:"âœ“"}),e("button",{onClick:()=>{he.value=null},class:"cancel-edit-btn",title:"Cancel",children:"âœ•"})]}):e(R,{children:[e("span",{class:"member-name",children:m}),e("button",{onClick:()=>d(u,m),class:"edit-member-btn",title:"Edit name",children:"âœŽ"}),e("button",{onClick:()=>s(u,m),class:"remove-member-btn",title:"Remove member",children:"Ã—"})]})},m)})})]}),e("div",{class:"group-card-footer",children:[e("button",{onClick:()=>l(u),class:"manage-members-btn",children:x?"Hide Members":"Manage Members"}),e("a",{href:`#${u}`,class:"view-group-link",onClick:m=>{m.preventDefault(),window.location.hash=u,window.location.reload()},children:"View Group â†’"})]})]},u)})})]})]})})}function hl({message:t,type:n}){const i=()=>{switch(n){case"success":return"âœ“";case"error":return"âœ•";default:return"â„¹"}};return e("div",{class:`toast toast-${n}`,children:[e("span",{class:"toast-icon",children:i()}),e("span",{class:"toast-message",children:t})]})}const S=v(null),G=v(""),D=v(null),C=v(""),xi=v(!0),ct=v([]),J=v({}),T=v([]),L=v({}),dn=Ke(()=>D.value?J.value[D.value]||[]:[]);let fl=0;function y(t,n="info"){const i=++fl;ct.value=[...ct.value,{id:i,message:t,type:n}],setTimeout(()=>{ct.value=ct.value.filter(o=>o.id!==i)},3e3)}async function Gt(t){try{const o=(await M().ref("groups").once("value")).val()||{};for(const[r,l]of Object.entries(o))if(l.settings&&l.settings.shortCode===t)return console.log(`[resolveShortCode] Resolved "${t}" to group ID: ${r}`),r;return console.log(`[resolveShortCode] No match found for "${t}", using as-is`),null}catch(n){return console.error("[resolveShortCode] Error:",n),null}}async function gl(){const t=sessionStorage.getItem("redirect");if(t){sessionStorage.removeItem("redirect");const s=t.replace(/^\/+|\/+$/g,"");if(s==="admin")return history.replaceState(null,"",t),"admin";if(s&&s!=="index.html"&&s!=="app.html")return history.replaceState(null,"",t),await Gt(s)||s}const n=window.location.hash.replace(/^#\/?/,"");if(n&&n!=="admin")return await Gt(n)||n;if(n==="admin")return"admin";const o=new URLSearchParams(window.location.search).get("group");if(o)return await Gt(o)||o;const l=window.location.pathname.replace(/^\/+|\/+$/g,"");return l==="admin"?"admin":!l||l==="index.html"||l==="app.html"?null:await Gt(l)||l}function vl(){return j(()=>{async function t(){try{Vi();const n=await gl();if(S.value=n,n&&n!=="admin"){const i=localStorage.getItem(`sessionUser_${n}`);i&&(C.value=i)}}catch(n){console.error("Initialization error:",n),y("Failed to initialize app","error")}finally{xi.value=!1}}t()},[]),xi.value?e("div",{class:"loading-screen",children:[e("div",{class:"loading-spinner",children:"ðŸŽ¾"}),e("p",{children:"Loading..."})]}):e(R,{children:[S.value===null&&e(ko,{}),S.value==="admin"&&e(pl,{}),S.value&&S.value!=="admin"&&e(ul,{}),e("div",{class:"toast-container",children:ct.value.map(t=>e(hl,{message:t.message,type:t.type},t.id))})]})}so(e(vl,{}),document.getElementById("app"));
