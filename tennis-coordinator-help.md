# Tue/Thu+ Midday Doubles - User Guide
## Tennis Coordinator

## Quick Start

1. **First Time:** Enter group PIN (ask admin if you don't have it)
2. **Select Date:** Tap any date in the next 2 weeks
3. **Check In:**
   - Select your name from dropdown (alphabetically sorted)
   - Choose: Singles Only, Doubles Only, or Either
   - Optional: Set your available time
   - Optional: Check/uncheck 3-player rotation preference
   - Tap "Check In"
4. **View Matches:** See organized matches automatically

---

## How It Works

### Check-In Priority
- **First-come, first-served** based on check-in time
- Earlier check-ins get priority in match organization

### Match Organization Rules

**Doubles Matches:**
- Formed from first 4 players who selected "Doubles" or "Either"
- Organized by check-in order
- Time preferences shown but not enforced (group negotiates)
- Need 4+ people for doubles

**Singles Matches:**
- Formed from players who selected "Singles" or "Either" (if not in doubles)
- **Requires time overlap** - won't pair people with conflicting times
- **Respects exclusion preferences** - won't pair excluded players
- Need 2+ people for singles

**Remaining Players:**
- 3 people: Rotation (choose 1v1 or 1v2 format)
- 2 people: Singles match (if compatible)
- 1 person: Waiting list

---

## Play Style Options

**Singles Only**
- Only paired for singles matches
- Never placed in doubles

**Doubles Only**
- Only placed in doubles matches
- If not enough for doubles, goes to waiting

**Either** (Most Flexible)
- First grouped for doubles if enough players
- If not used in doubles, available for singles
- Recommended for maximum flexibility

---

## 3-Player Rotation Preference

**Willing to Play Rotation (Default: Checked)**
- When checked, you can be placed in a 3-player rotation group
- Rotation groups form when exactly 3 compatible players remain
- Choose between 1v1 rotation (singles practice) or 1v2 rotation (Australian doubles)
- If unchecked, you'll only be placed in standard doubles or singles matches
- All 3 players must have this checked for rotation to form

**When to uncheck:**
- If you only want traditional 2-person or 4-person matches
- If you prefer to wait for a standard match rather than rotate

---

## Time Availability

**How to Use:**
- Leave blank = Available any time
- Enter start time only = "from X onwards"
- Enter end time only = "until X"
- Enter both = Specific window (e.g., 2:00PM-5:00PM)

**Important:**
- Times enforced for **singles matches only**
- Times shown but ignored for doubles (group coordinates)
- No time overlap = players placed in waiting, not paired

**Examples:**
- ✅ 9:00AM-11:00AM + 10:00AM-12:00PM = Can play (overlap 10-11AM)
- ❌ 9:00AM-11:00AM + 12:00PM-5:00PM = Cannot play (no overlap)
- ✅ Blank + any time = Always compatible

---

## Partner Preferences (Singles Only)

Access via ⚙️ Preferences button next to your name.

**Exclude Players:**
- System will not pair you with excluded players in singles matches
- Applies only to singles matches (not doubles or rotation)
- If exclusions prevent pairing, you'll be placed in waiting
- Preferences are private and persist across all dates
- No visible indication that exclusions are set

---

## Adding Guests

1. Select "+ Add Guest" from name dropdown
2. Enter guest's name
3. Select who is adding the guest
4. Guest appears as: "Guest Name (guest of Your Name)"
5. Guests can have same preferences as regular members

---

## Admin Features

Click ⚙️ icon (top right), enter admin PIN.

**Core Members:**
- Add/remove regular group members
- Members displayed alphabetically in both admin list and name dropdown
- New members automatically sorted into alphabetical order

**Admin PIN:**
- Required to access admin settings
- Only admin can change this PIN

**Group PIN:**
- Used by all members to access the app
- Share this PIN with group members
- Changes take effect on next page load

---

## Rules & Etiquette

1. **Check in only if you can actually play**
   - Don't reserve spots "just in case"
   
2. **Update your time accurately**
   - Helps everyone coordinate better
   - Be realistic about your availability

3. **Remove yourself if plans change**
   - Click "Remove" next to your name
   - Frees up spot for others

4. **Respect exclusion preferences**
   - If someone excludes you, don't take it personally
   - Focus on playing with compatible partners

5. **Coordinate final time as a group**
   - Check everyone's time windows
   - Find overlap that works for all
   - Use WhatsApp to confirm

6. **First check-in gets priority**
   - Don't check in super early to game the system
   - Be reasonable (check in when you actually know)

7. **Guests are welcome**
   - Make sure your guest understands the level
   - You're responsible for your guest's behavior

---

## Common Scenarios

**"I'm in waiting list"**
- Not enough players with compatible times
- Exclusion preferences preventing pairing
- Coordinate with others to find overlapping time

**"Match shows time conflict"**
- Warning: some players have non-overlapping times
- Group needs to negotiate a common time
- For doubles only (singles won't match with conflicts)

**"I want to change my check-in"**
- Remove yourself, then check in again
- Loses your original check-in time priority

**"Same person checked in twice"**
- System prevents this
- Contact admin if you see duplicates

**"I forgot the PIN"**
- Ask any group member or admin
- PIN is shared among all members

---

## Match Organization Examples

**Example 1: 8 Players**
- All select "Either", no time restrictions
- Result: 2 doubles matches

**Example 2: 6 Players**
- 4 select "Either", 2 select "Singles"
- Result: 1 doubles match (first 4) + 1 singles match (remaining 2)

**Example 3: 5 Players**
- 3 select "Doubles", 2 select "Singles"
- Result: 3 in waiting (need 4 for doubles) + 1 singles match (if times overlap)

**Note on 3-Person Rotation:**
When 3 compatible players remain, they can choose rotation format:

**1v1 Rotation (Singles):**
- 2 players on court play singles
- 1 player waits off court
- After each game/set, players rotate
- Everyone gets equal singles practice

**1v2 Rotation (Australian Doubles):**
- 1 player on one side vs 2 players on other side
- Rotate positions after each game
- More continuous play, good practice
- Challenges for the solo player

**Example 4: 4 Players with Time Conflicts**
- 2 available 9-11AM, 2 available 2-5PM
- All select "Singles"
- Result: 2 singles matches (within each time group)

**Example 5: Exclusions**
- Alice excludes Bob
- Both select "Singles" 
- Result: Both in waiting (cannot pair due to exclusion)

---

## Tips for Success

1. **Be flexible with times** - increases matching chances
2. **Select "Either"** - get into more matches
3. **Check in early** - better position in queue
4. **Keep preferences minimal** - too many exclusions = fewer matches
5. **Use WhatsApp** - coordinate final details after matches form
6. **Check weather** - plan accordingly (shown for next 14 days when hosted)

---

## Troubleshooting

**Can't access app:**
- Check you have correct PIN
- Try clicking "Cancel" to skip PIN for testing

**Don't see my check-in:**
- Verify you selected correct date
- Check you clicked "Check In" button
- Refresh page

**Match seems wrong:**
- Review time windows for conflicts
- Check preference settings
- Verify play style selections

**Settings won't save:**
- Make sure you entered correct admin PIN
- Click "Save Settings" button
- Refresh page to verify

---

## Contact

Questions or issues? Contact group admin via WhatsApp.

---

# Technical Details & Admin Information

*This section contains technical details and is intended for administrators and curious users.*

---

## Real-Time Data Synchronization

**How It Works:**
- All data stored in Firebase Realtime Database (cloud-based)
- Changes sync automatically across all devices
- Multiple users can view and interact simultaneously
- No page refresh needed - updates appear instantly

**What's Shared:**
- ✅ Core members list
- ✅ Check-ins for all dates
- ✅ User preferences (exclusions)
- ✅ Admin settings (PINs)

**Benefits:**
- Everyone sees the same data
- Real-time match organization
- Admin manages members once → everyone sees them
- No need to manually sync devices

---

## Data Storage & Privacy

**Storage Location:**
- Firebase Realtime Database (Google Cloud)
- Data persists across devices and browsers
- Not stored locally (except authentication flag)

**Privacy:**
- Data visible to anyone with the group PIN
- Exclusion preferences are private (not displayed publicly)
- Admin PIN required for settings changes
- No personal data collected beyond names and check-ins

**Data Retention:**
- Data persists indefinitely unless manually deleted
- Admin can remove members or clear check-ins
- Past dates accumulate - can be cleaned up if needed

---

## System Requirements

**Browsers:**
- Chrome, Safari, Firefox, Edge (latest versions)
- Mobile browsers supported
- JavaScript must be enabled

**Internet Connection:**
- Required for real-time sync
- Offline mode not supported
- WiFi or cellular data needed

**Devices:**
- Desktop computers
- Tablets
- Smartphones (iOS/Android)

---

## Calendar System

**Date Range:**
- Shows next 14 days from today
- Past dates hidden automatically
- Updates daily at midnight
- Today selected by default

**Check-in Data:**
- Organized by date (YYYY-MM-DD format)
- Each date has independent check-in list
- Old check-ins remain until manually removed

---

## Weather Integration

**Features:**
- Los Gatos, CA weather forecast
- 14-day forecast available
- Updates when selecting dates
- Shows temperature, conditions, and icon

**Data Source:**
- Open-Meteo API (free weather service)
- Updates automatically
- Cached for 15 minutes to improve performance

**Note:**
- Requires internet connection
- May not load if API is down (non-critical feature)

---

## Authentication & Security

**Group PIN (Default: 14675):**
- Required for app access
- Shared among all group members
- Can be changed by admin
- Prevents random access

**Admin PIN (Default: 3250):**
- Required for admin settings
- Only admin should know this
- Can change member list and PINs
- Keep this private

**Security Considerations:**
- PINs are basic security (not encryption)
- Suitable for private tennis groups
- Not intended for sensitive data
- Anyone with PIN can access/modify data

---

## Firebase Configuration

**Setup:**
- Firebase Realtime Database required
- Configuration included in app
- Project: tennis-coordinator-43f53
- Region: us-central1

**Database Rules:**
- Open read/write for simplicity
- Protected by app-level PIN authentication
- Suitable for small trusted groups

**Maintenance:**
- Firebase free tier: Generous limits
- Should not exceed limits for tennis group
- Data can be exported if needed

---

## Performance & Limitations

**Performance:**
- Real-time updates: < 1 second
- Initial load: 1-3 seconds (depending on data size)
- Weather updates: 1-2 seconds
- Optimized for mobile devices

**Limitations:**
- Maximum 50 core members recommended
- 14-day date window
- No offline mode
- No data export feature (admin can view in Firebase)

**Known Issues:**
- Weather may not load if API down
- Real-time updates require browser to stay open
- Timezone: All times in local device timezone

---

## Architecture

**Technology Stack:**
- Frontend: HTML, CSS, JavaScript (vanilla)
- Backend: Firebase Realtime Database
- Hosting: GitHub Pages
- APIs: Open-Meteo (weather)

**Data Structure:**
```
/checkins/
  /2025-11-29/
    - [checkin objects]
/settings/
  - coreMembers: []
  - groupPin: "14675"
  - adminPin: "3250"
/userPreferences/
  /PlayerName/
    - include: []
    - exclude: []
```

---

## Troubleshooting for Admins

**Firebase Connection Issues:**
- Check browser console for errors (F12)
- Verify Firebase config is correct
- Check internet connection
- Firebase status: https://status.firebase.google.com/

**Data Not Syncing:**
- Verify Firebase Realtime Database is enabled
- Check database rules allow read/write
- Ensure multiple users using same URL
- Clear browser cache and reload

**Members Not Appearing:**
- Verify members added through admin settings
- Check Firebase Console → Database → Data
- Ensure settings were saved
- Try refreshing all devices

**Reset Everything:**
1. Go to Firebase Console
2. Navigate to Realtime Database → Data
3. Delete specific nodes or all data
4. Refresh app on all devices

---

**Version:** 2.0 (Firebase)
**Last Updated:** December 2024
**Repository:** https://github.com/sashana/tennis-coordinator
