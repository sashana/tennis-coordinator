# ğŸ¾ Tue/Thu+ Midday Doubles
## Tennis Coordinator - User Guide

---

## ğŸš€ Quick Start

### First-Time Setup
1. **Enter PIN** â†’ Ask admin for group PIN
2. **Select Your Name** â†’ Choose from dropdown (creates your session)
3. **Select Date** â†’ Choose from next 14 days
4. **Check In** â†’ Follow steps below
5. **View Matches** â†’ See organized games automatically

### How to Check In

**Step 1: Select Your Name**
- Dropdown shows all members alphabetically
- Or select "+ Add Guest" to bring a friend

**Step 2: Choose Play Style**
- ğŸ¸ **Singles Only** â†’ Only 1v1 matches
- ğŸ¾ **Doubles Only** â†’ Only 2v2 matches
- âš¡ **Either** â†’ Most flexible (recommended)

**Step 3: Set Time (Optional)**
- Leave blank if available anytime
- Enter specific window (e.g., 2:00 PM - 5:00 PM)

**Step 4: Rotation Preference**
- âœ… Checked â†’ Can play 3-player rotation
- â¬œ Unchecked â†’ Only standard matches

**Step 5: Tap "Check In"**

---

## ğŸ“‹ How Match Organization Works

### Priority System
â° **First-come, first-served** based on check-in time

### Match Formation Order

**1ï¸âƒ£ Doubles Matches (Groups of 4)**
- Takes first 4 players who selected "Doubles" or "Either"
- Check-in order determines priority
- Time shown but not enforced (you coordinate)

**2ï¸âƒ£ Singles Matches (Pairs)**
- Pairs remaining players who selected "Singles" or "Either"
- âš ï¸ **Requires overlapping time windows**
- âš ï¸ **Respects exclusion preferences**

**3ï¸âƒ£ Remaining Players**
- **3 people** â†’ Rotation (1v1 or 1v2)
- **2 people** â†’ Singles (if compatible)
- **1 person** â†’ Waiting list

---

## ğŸ¸ Play Style Guide

### Singles Only ğŸ¯
**Best for:** Players who prefer 1v1 matches
- âœ… Only paired for singles matches
- âŒ Never placed in doubles
- âš ï¸ May wait if no compatible partners

### Doubles Only ğŸ¾
**Best for:** Players who prefer 2v2 matches
- âœ… Only placed in doubles matches (groups of 4)
- âŒ Never in singles or rotation
- âš ï¸ Goes to waiting if less than 4 doubles players

### Either âš¡ (Recommended)
**Best for:** Maximum flexibility
- 1ï¸âƒ£ First considered for doubles
- 2ï¸âƒ£ Then available for singles if not in doubles
- 3ï¸âƒ£ Can be in rotation groups
- âœ… Best chance of getting a match

---

## ğŸ”„ 3-Player Rotation

### What Is It?
When exactly 3 compatible players remain, they can form a rotation group

### Format Options

**ğŸ¯ 1v1 Rotation (Singles Practice)**
- 2 players on court, 1 waits
- Rotate after each game/set
- Everyone gets equal practice time

**ğŸ¾ 1v2 Rotation (Australian Doubles)**
- 1 player vs 2 players
- Rotate positions after each game
- More continuous play

### Your Preference
- âœ… **Checked** â†’ Can be placed in rotation (default)
- â¬œ **Unchecked** â†’ Only standard matches

**Note:** All 3 players must allow rotation for it to form

---

## â° Time Windows

### How It Works

**Leave Blank**
- Available anytime
- âœ… Matches with everyone

**Start Time Only**
- Available "from X onwards"
- Example: 2:00 PM â†’ Available 2 PM and later

**End Time Only**
- Available "until X"
- Example: 5:00 PM â†’ Available anytime before 5 PM

**Both Times**
- Specific window
- Example: 2:00 PM - 5:00 PM

### Important Rules

âš ï¸ **Singles Matches ONLY**
- Time overlap required for pairing
- No overlap = both go to waiting

âœ… **Doubles Matches**
- Times shown but not enforced
- Group coordinates together

### Examples

| Player A | Player B | Result |
|----------|----------|--------|
| 9 AM - 11 AM | 10 AM - 12 PM | âœ… Can play (10-11 AM overlap) |
| 9 AM - 11 AM | 12 PM - 5 PM | âŒ Can't play (no overlap) |
| Blank | Any time | âœ… Always compatible |
| 2 PM - 5 PM | 3 PM - 4 PM | âœ… Can play (3-4 PM overlap) |

---

## ğŸ”’ Partner Preferences

### How to Access
Click âš™ï¸ **Preferences** button next to your name in check-in list

### Exclude Players (Singles Only)
**What it does:**
- System won't pair you with excluded players
- Only applies to singles matches
- Completely private - no one can see your exclusions

**When you exclude someone:**
- âœ… Works for singles matches
- âŒ Doesn't affect doubles or rotation
- âš ï¸ May result in waiting if no other partners available

**Privacy:**
- No visible badges or indicators
- Preferences persist across all dates
- Discrete and confidential

---

## ğŸ‘¤ Your Session & Changing User

### Session User Button
After selecting your name, you'll see **"[Your Name] â–¼"** in the top right corner next to the settings icon.

**What it shows:**
- Your currently logged-in identity
- Persists across page refreshes
- Used to determine permissions (who can remove check-ins)

### Changing Your User
If you accidentally selected the wrong name:

1. Click **"[Your Name] â–¼"** button (top right)
2. Confirm you want to change
3. Select correct name from dropdown
4. New name appears in button

**Note:** This clears your session and permissions. You'll need to select your name again.

---

## ğŸ‘¥ Adding Guests

### Steps
1. Select **"+ Add Guest"** from name dropdown
2. Enter guest's full name
3. Select who is bringing them
4. Guest appears as: **"John Doe (guest of Alex)"**

### Guest Features
- âœ… Can check in like regular members
- âœ… Can set play style and time preferences
- âœ… Can be in any match type
- âš ï¸ You're responsible for your guest

---

## ğŸ‘¤ Adding New Members

### How It Works (Tight-Knit Groups)
Anyone can add new permanent members - no admin approval needed! This is based on trust and social accountability.

### Steps
1. Select **"+ Add New Member"** from name dropdown
2. Fill in member details:
   - **Name** (required)
   - **Contact** - email or phone (optional)
   - **Notes** - skill level, how you know them (optional)
3. Click **"Add Member"**
4. Member instantly appears in dropdown for everyone

### Transparency & Accountability
- **Who added them?** Shown in admin settings (anyone can view with group PIN)
- **When added?** Date recorded
- **Contact & notes:** Visible to all in admin settings
- **Social accountability:** Your name is attached to members you add

### Example in Admin Settings:
```
John Smith                              [Remove]
  Added by: Alex on Dec 3, 2024
  Contact: john@email.com
  Notes: 4.0 player, friend from work
```

### Guidelines
- âœ… Add players who match the group's skill level
- âœ… Be thoughtful - your name is attached
- âœ… Include contact info to help coordination
- âš ï¸ Admin can remove if someone adds poorly

---

## âš™ï¸ Admin Settings

**Access:** Click âš™ï¸ icon (top right) â†’ Enter admin PIN

### Core Members
- ğŸ‘€ **View all members** and who added them
- â• **Add members manually** (admin can also add directly)
- ğŸ“‹ **See member details:**
  - Who added them and when
  - Contact information
  - Notes about skill level, etc.
- â– **Remove members** (removes member and their details)
- ğŸ“ Members shown alphabetically everywhere
- âœ… Changes sync to all users instantly

**Note:** Anyone with group PIN can view member details in settings. This promotes transparency about who vouched for new members.

### Admin PIN
- ğŸ” Required for admin settings
- ğŸ”‘ Only admin should know this
- Can change members and PINs

### Group PIN
- ğŸšª Required for app access
- ğŸ“¢ Share with all group members
- Can be changed by admin

### Activity History
- ğŸ“‹ Click activity icon (top right) to view recent actions
- Shows check-ins, removals, and who performed them
- Helps track changes throughout the day

### Reset Day (Admin Only)
- ğŸ—‘ï¸ **"Reset This Day"** button appears next to WhatsApp share (when logged in as admin)
- Clears all check-ins for currently selected date only
- Requires admin PIN confirmation
- Cannot be undone

### WhatsApp Sharing
- ğŸ“± Share button appears when matches are organized
- Automatically formats message with:
  - Date
  - Match assignments (Doubles/Singles/Rotation)
  - Player names and time windows
  - Standby list (if any)
  - Weather forecast
- Compact, text-only format for easy sharing
- Opens WhatsApp with pre-filled message

---

## âœ… Rules & Etiquette

### Check-In Rules

**âœ“ Only check in if you can play**
- Don't reserve "just in case"
- Be committed to playing

**âœ“ Update time accurately**
- Helps everyone coordinate
- Be realistic about availability

**âœ“ Remove yourself if plans change**
- Click "Remove" next to your name
- Frees spot for others

### Playing Together

**ğŸ¤ Respect exclusion preferences**
- Don't take it personally
- Focus on compatible partners
- Keep it professional

**ğŸ’¬ Coordinate as a group**
- Check everyone's time windows
- Find common overlap
- Use WhatsApp to confirm details

**â° Be fair with priority**
- First check-in gets priority
- Don't game the system
- Check in when you know you can play

### Guests

**ğŸ‘¥ Guests welcome!**
- âœ… Ensure they match the skill level
- âœ… You're responsible for their behavior
- âœ… Introduce them to the group

---

## â“ Common Questions

### "Why am I in waiting?"

**Possible reasons:**
- â° No time overlap with other players
- ğŸš« Exclusion preferences preventing pairing
- ğŸ¾ Not enough players for your play style

**What to do:**
- Check your time window
- Coordinate with group via WhatsApp
- Consider changing play style to "Either"

### "Match shows time conflict"

**What it means:**
- Players have non-overlapping times
- Only for doubles (shown as warning)

**What to do:**
- Group needs to negotiate common time
- Use WhatsApp to coordinate
- One person may need to adjust

### "How do I change my check-in?"

**Steps:**
1. Click "Remove" next to your name
2. Check in again with new settings

**Note:** You lose original check-in time priority

### "I forgot the PIN"

**Solution:**
- Ask any group member
- Or contact admin
- Group PIN shared with everyone

### "Someone checked in twice"

**This shouldn't happen:**
- System prevents duplicates
- Contact admin if you see this

---

## ğŸ“Š Match Formation Tables

This group prioritizes **doubles formation**. "Either" players default toward doubles.

### 1 Player

| Preference | Display |
|------------|---------|
| Either | Doubles (forming) - Need 3 more |
| Singles Only | Singles (forming) - Need 1 more |
| Doubles Only | Doubles (forming) - Need 3 more |

### 2 Players

| Player A | Player B | Display |
|----------|----------|---------|
| Either | Either | Doubles (forming) - Need 2 more |
| Either | Singles Only | Singles match |
| Either | Doubles Only | Doubles (forming) - Need 2 more |
| Singles Only | Singles Only | Singles match |
| Singles Only | Doubles Only | Singles (forming) + Doubles (forming) separate |
| Doubles Only | Doubles Only | Doubles (forming) - Need 2 more |

### 3 Players

| Preferences | Display |
|-------------|---------|
| All Either | Doubles (forming) - Need 1 more + "Can rotate if no 4th" |
| 2 Either + 1 Singles Only | Doubles (forming) + Singles (forming) |
| 2 Either + 1 Doubles Only | Doubles (forming) - Need 1 more |
| 1 Either + 2 Singles Only | Singles (first 2) + Singles (forming) |
| 1 Either + 2 Doubles Only | Doubles (forming) - Need 1 more |
| All Singles Only | Singles (first 2) + Singles (forming) |
| 2 Singles Only + 1 Doubles Only | Singles + Doubles (forming) |
| 1 Singles Only + 2 Doubles Only | Doubles (forming) + Singles (forming) |
| All Doubles Only | Doubles (forming) - Need 1 more |

### 4+ Players

| Scenario | Result |
|----------|--------|
| 4+ who can play doubles | Doubles match forms, remainder handled per above |

### Fallback Messages for Doubles (forming)

When players are waiting for doubles to fill, the system shows helpful fallback options:

| Situation | Message Shown |
|-----------|---------------|
| 1 Either player | "Can play singles if 1 more joins" |
| 2+ Either players | "Will play singles if no more join" |
| 3 Either players (all allow rotation) | "Can rotate if no 4th" |
| Only Doubles Only players | No fallback (must wait for doubles) |

---

## ğŸ“‹ Match Organization Examples

### Example 1: Perfect Doubles Day
**8 Players, all select "Either"**
```
Result: ğŸ¾ 2 Doubles Matches
```

### Example 2: Mixed Preferences
**6 Players: 4 "Either", 2 "Singles Only"**
```
Result:
ğŸ¾ 1 Doubles Match (first 4 Either)
ğŸ¸ 1 Singles Match (2 Singles Only)
```

### Example 3: Doubles Forming
**2 Players: 1 "Either", 1 "Doubles Only"**
```
Result:
ğŸ¾ Doubles (forming) - Need 2 more
```

### Example 4: Mixed Forming
**2 Players: 1 "Singles Only", 1 "Doubles Only"**
```
Result:
ğŸ¸ Singles (forming) - Need 1 more
ğŸ¾ Doubles (forming) - Need 3 more
```

### Example 5: Three Either with Rotation
**3 Players, all "Either", all allow rotation**
```
Result:
ğŸ¾ Doubles (forming) - Need 1 more
   Can rotate if no 4th
```

### Example 6: Time Conflicts
**4 Players, all "Singles Only"**
- 2 available 9-11 AM
- 2 available 2-5 PM
```
Result: ğŸ¸ 2 Singles Matches
(paired within same time windows)
```

### Example 7: Exclusion Impact
**2 Players, both "Singles Only"**
- Alice excludes Bob
```
Result:
ğŸ¸ Singles (forming) - Alice needs 1 more
ğŸ¸ Singles (forming) - Bob needs 1 more
```

---

## ğŸ’¡ Tips for Success

### Get More Matches
- âš¡ **Select "Either"** â†’ Maximum flexibility
- â° **Be flexible with times** â†’ More partners
- ğŸ¯ **Limit exclusions** â†’ Better pairing chances

### Priority & Coordination
- ğŸ• **Check in early** â†’ Better queue position
- ğŸ’¬ **Use WhatsApp** â†’ Coordinate details
- ğŸŒ¤ï¸ **Check weather** â†’ Plan ahead

### Be a Good Member
- âœ… **Commit when checking in** â†’ Don't flake
- ğŸ”„ **Update if plans change** â†’ Remove yourself
- ğŸ¤ **Be friendly** â†’ Everyone wants to play

---

## ğŸ”§ Troubleshooting

### Can't Access App

**Problem:** PIN not working
- âœ“ Verify you have correct group PIN
- âœ“ Ask group member or admin
- âœ“ Try "Cancel" to skip (testing only)

### Check-In Not Showing

**Problem:** Don't see my check-in
- âœ“ Verify correct date selected
- âœ“ Confirm you clicked "Check In" button
- âœ“ Refresh page (changes sync automatically)

### Match Looks Wrong

**Problem:** Organization seems incorrect
- âœ“ Review time windows for conflicts
- âœ“ Check exclusion preferences
- âœ“ Verify play style selections
- âœ“ Remember: first-come, first-served

### Settings Won't Save

**Problem:** Admin settings not persisting
- âœ“ Ensure correct admin PIN entered
- âœ“ Click "Save Settings" button
- âœ“ Wait a moment for sync
- âœ“ Check Firebase connection (see technical section)

### Data Not Syncing

**Problem:** Changes not appearing on other devices
- âœ“ Check internet connection
- âœ“ Ensure all users on same URL
- âœ“ Wait 1-2 seconds for sync
- âœ“ Refresh browser if needed

---

## ğŸ“ Contact

**Questions or issues?**
Contact group admin via WhatsApp

---

# Technical Details & Admin Information

*This section contains technical details and is intended for administrators and curious users.*

---

## Real-Time Data Synchronization

**How It Works:**
- All data stored in Firebase Realtime Database (cloud-based)
- Changes sync automatically across all devices
- Multiple users can view and interact simultaneously
- No page refresh needed - updates appear instantly

**What's Shared:**
- âœ… Core members list
- âœ… Check-ins for all dates
- âœ… User preferences (exclusions)
- âœ… Admin settings (PINs)

**Benefits:**
- Everyone sees the same data
- Real-time match organization
- Admin manages members once â†’ everyone sees them
- No need to manually sync devices

---

## Data Storage & Privacy

**Storage Location:**
- Firebase Realtime Database (Google Cloud)
- Data persists across devices and browsers
- Not stored locally (except authentication flag)

**Privacy:**
- Data visible to anyone with the group PIN
- Exclusion preferences are private (not displayed publicly)
- Admin PIN required for settings changes
- No personal data collected beyond names and check-ins

**Data Retention:**
- Data persists indefinitely unless manually deleted
- Admin can remove members or clear check-ins
- Past dates accumulate - can be cleaned up if needed

---

## System Requirements

**Browsers:**
- Chrome, Safari, Firefox, Edge (latest versions)
- Mobile browsers supported
- JavaScript must be enabled

**Internet Connection:**
- Required for real-time sync
- Offline mode not supported
- WiFi or cellular data needed

**Devices:**
- Desktop computers
- Tablets
- Smartphones (iOS/Android)

---

## Calendar System

**Date Range:**
- Shows next 14 days from today
- Past dates hidden automatically
- Updates daily at midnight
- Today selected by default

**Check-in Data:**
- Organized by date (YYYY-MM-DD format)
- Each date has independent check-in list
- Old check-ins remain until manually removed

---

## Weather Integration

**Features:**
- Los Gatos, CA weather forecast
- 14-day forecast available
- Updates when selecting dates
- Shows temperature, conditions, and icon

**Data Source:**
- Open-Meteo API (free weather service)
- Updates automatically
- Cached for 15 minutes to improve performance

**Note:**
- Requires internet connection
- May not load if API is down (non-critical feature)

---

## Authentication & Security

**Group PIN:**
- Required for app access
- Shared among all group members
- Can be changed by admin in settings
- Prevents random access

**Admin PIN:**
- Required for admin settings
- Only admin should know this
- Can change member list and PINs
- Keep this private

**Security Considerations:**
- PINs are basic security (not encryption)
- Suitable for private tennis groups
- Not intended for sensitive data
- Anyone with PIN can access/modify data

---

## Firebase Configuration

**Setup:**
- Firebase Realtime Database required
- Configuration included in app
- Project: tennis-coordinator-43f53
- Region: us-central1

**Database Rules:**
- Open read/write for simplicity
- Protected by app-level PIN authentication
- Suitable for small trusted groups

**Maintenance:**
- Firebase free tier: Generous limits
- Should not exceed limits for tennis group
- Data can be exported if needed

---

## Performance & Limitations

**Performance:**
- Real-time updates: < 1 second
- Initial load: 1-3 seconds (depending on data size)
- Weather updates: 1-2 seconds
- Optimized for mobile devices

**Limitations:**
- Maximum 50 core members recommended
- 14-day date window
- No offline mode
- No data export feature (admin can view in Firebase)

**Known Issues:**
- Weather may not load if API down
- Real-time updates require browser to stay open
- Timezone: All times in local device timezone

---

## Architecture

**Technology Stack:**
- Frontend: HTML, CSS, JavaScript (vanilla)
- Backend: Firebase Realtime Database
- Hosting: GitHub Pages
- APIs: Open-Meteo (weather)

**Data Structure:**
```
/groups/
  /[group-id]/
    /checkins/
      /2025-11-29/
        - [checkin objects]
    /activity/
      /2025-11-29/
        - [activity log entries]
    /settings/
      - groupName: ""
      - coreMembers: []
      - groupPin: ""
      - adminPin: ""
      - location: {name, lat, lon}
/userPreferences/
  /PlayerName/
    - include: []
    - exclude: []
```

---

## Troubleshooting for Admins

**Firebase Connection Issues:**
- Check browser console for errors (F12)
- Verify Firebase config is correct
- Check internet connection
- Firebase status: https://status.firebase.google.com/

**Data Not Syncing:**
- Verify Firebase Realtime Database is enabled
- Check database rules allow read/write
- Ensure multiple users using same URL
- Clear browser cache and reload

**Members Not Appearing:**
- Verify members added through admin settings
- Check Firebase Console â†’ Database â†’ Data
- Ensure settings were saved
- Try refreshing all devices

**Reset Everything:**
1. Go to Firebase Console
2. Navigate to Realtime Database â†’ Data
3. Delete specific nodes or all data
4. Refresh app on all devices

---

**Version:** 2.5 (Multi-Group Firebase)
**Last Updated:** December 2024
**Repository:** https://github.com/sashana/tennis-coordinator

**Recent Updates:**
- Session user management with changeable identity
- Activity history tracking
- Admin-only day reset functionality
- Improved WhatsApp message formatting
- Multi-group support with unique URLs
- Sparse array handling for accurate check-in counts
